/* RainLoop Webmail (c) RainLoop Team | Licensed under CC BY-NC-SA 3.0 */
webpackJsonp([2],{0:function(t,e,i){var s;!function(){"use strict";i(35)(i(16))}(s)},15:function(t,e,i){!function(){"use strict";function e(){n.call(this),this.oRequests={}}var s=i(2),n=i(40);s.extend(e.prototype,n.prototype),e.prototype.adminLogin=function(t,e,i){this.defaultRequest(t,"AdminLogin",{Login:e,Password:i})},e.prototype.adminLogout=function(t){this.defaultRequest(t,"AdminLogout")},e.prototype.saveAdminConfig=function(t,e){this.defaultRequest(t,"AdminSettingsUpdate",e)},e.prototype.domainList=function(t){this.defaultRequest(t,"AdminDomainList")},e.prototype.pluginList=function(t){this.defaultRequest(t,"AdminPluginList")},e.prototype.packagesList=function(t){this.defaultRequest(t,"AdminPackagesList")},e.prototype.coreData=function(t){this.defaultRequest(t,"AdminCoreData")},e.prototype.updateCoreData=function(t){this.defaultRequest(t,"AdminUpdateCoreData",{},9e4)},e.prototype.packageInstall=function(t,e){this.defaultRequest(t,"AdminPackageInstall",{Id:e.id,Type:e.type,File:e.file},6e4)},e.prototype.packageDelete=function(t,e){this.defaultRequest(t,"AdminPackageDelete",{Id:e.id})},e.prototype.domain=function(t,e){this.defaultRequest(t,"AdminDomainLoad",{Name:e})},e.prototype.plugin=function(t,e){this.defaultRequest(t,"AdminPluginLoad",{Name:e})},e.prototype.domainDelete=function(t,e){this.defaultRequest(t,"AdminDomainDelete",{Name:e})},e.prototype.domainDisable=function(t,e,i){return this.defaultRequest(t,"AdminDomainDisable",{Name:e,Disabled:i?"1":"0"})},e.prototype.pluginSettingsUpdate=function(t,e){return this.defaultRequest(t,"AdminPluginSettingsUpdate",e)},e.prototype.licensing=function(t,e){return this.defaultRequest(t,"AdminLicensing",{Force:e?"1":"0"})},e.prototype.licensingActivate=function(t,e,i){return this.defaultRequest(t,"AdminLicensingActivate",{Domain:e,Key:i})},e.prototype.pluginDisable=function(t,e,i){return this.defaultRequest(t,"AdminPluginDisable",{Name:e,Disabled:i?"1":"0"})},e.prototype.createOrUpdateDomain=function(t,e,i,s,n,o,a,r,c,u,l,p,d){this.defaultRequest(t,"AdminDomainSave",{Create:e?"1":"0",Name:i,IncHost:s,IncPort:n,IncSecure:o,IncShortLogin:a?"1":"0",OutHost:r,OutPort:c,OutSecure:u,OutShortLogin:l?"1":"0",OutAuth:p?"1":"0",WhiteList:d})},e.prototype.testConnectionForDomain=function(t,e,i,s,n,o,a,r,c){this.defaultRequest(t,"AdminDomainTest",{Name:e,IncHost:i,IncPort:s,IncSecure:n,OutHost:o,OutPort:a,OutSecure:r,OutAuth:c?"1":"0"})},e.prototype.testContacts=function(t,e){this.defaultRequest(t,"AdminContactsTest",e)},e.prototype.saveNewAdminPassword=function(t,e){this.defaultRequest(t,"AdminPasswordUpdate",e)},e.prototype.adminPing=function(t){this.defaultRequest(t,"AdminPing")},t.exports=new e}()},16:function(t,e,i){!function(){"use strict";function e(){m.call(this,p)}var s=i(12),n=i(2),o=i(3),a=i(6),r=i(1),c=i(11),u=i(10),l=i(18),p=i(15),d=i(63),g=i(62),h=i(5),m=i(34);n.extend(e.prototype,m.prototype),e.prototype.remote=function(){return p},e.prototype.data=function(){return l},e.prototype.reloadDomainList=function(){l.domainsLoading(!0),p.domainList(function(t,e){if(l.domainsLoading(!1),a.StorageResultType.Success===t&&e&&e.Result){var i=n.map(e.Result,function(t,e){return{name:e,disabled:o.observable(!t),deleteAccess:o.observable(!1)}},this);l.domains(i)}})},e.prototype.reloadPluginList=function(){l.pluginsLoading(!0),p.pluginList(function(t,e){if(l.pluginsLoading(!1),a.StorageResultType.Success===t&&e&&e.Result){var i=n.map(e.Result,function(t){return{name:t.Name,disabled:o.observable(!t.Enabled),configured:o.observable(!!t.Configured)}},this);l.plugins(i)}})},e.prototype.reloadPackagesList=function(){l.packagesLoading(!0),l.packagesReal(!0),p.packagesList(function(t,e){if(l.packagesLoading(!1),a.StorageResultType.Success===t&&e&&e.Result){l.packagesReal(!!e.Result.Real),l.packagesMainUpdatable(!!e.Result.MainUpdatable);var i=[],s={};n.each(l.packages(),function(t){t&&t.loading()&&(s[t.file]=t)}),r.isArray(e.Result.List)&&(i=n.compact(n.map(e.Result.List,function(t){return t?(t.loading=o.observable(!r.isUnd(s[t.file])),"core"!==t.type||t.canBeInstalled?t:null):null}))),l.packages(i)}else l.packagesReal(!1)})},e.prototype.updateCoreData=function(){l.coreUpdating(!0),p.updateCoreData(function(t,e){l.coreUpdating(!1),l.coreRemoteVersion(""),l.coreRemoteRelease(""),l.coreVersionCompare(-2),a.StorageResultType.Success===t&&e&&e.Result?(l.coreReal(!0),s.location.reload()):l.coreReal(!1)})},e.prototype.reloadCoreData=function(){l.coreChecking(!0),l.coreReal(!0),p.coreData(function(t,e){l.coreChecking(!1),a.StorageResultType.Success===t&&e&&e.Result?(l.coreReal(!!e.Result.Real),l.coreUpdatable(!!e.Result.Updatable),l.coreAccess(!!e.Result.Access),l.coreRemoteVersion(e.Result.RemoteVersion||""),l.coreRemoteRelease(e.Result.RemoteRelease||""),l.coreVersionCompare(r.pInt(e.Result.VersionCompare))):(l.coreReal(!1),l.coreRemoteVersion(""),l.coreRemoteRelease(""),l.coreVersionCompare(-2))})},e.prototype.reloadLicensing=function(t){t=r.isUnd(t)?!1:!!t,l.licensingProcess(!0),l.licenseError(""),p.licensing(function(t,e){l.licensingProcess(!1),a.StorageResultType.Success===t&&e&&e.Result&&r.isNormal(e.Result.Expired)?(l.licenseValid(!0),l.licenseExpired(r.pInt(e.Result.Expired)),l.licenseError(""),l.licensing(!0)):e&&e.ErrorCode&&-1<r.inArray(r.pInt(e.ErrorCode),[a.Notification.LicensingServerIsUnavailable,a.Notification.LicensingExpired])?(l.licenseError(r.getNotification(r.pInt(e.ErrorCode))),l.licensing(!0)):a.StorageResultType.Abort===t?(l.licenseError(r.getNotification(a.Notification.LicensingServerIsUnavailable)),l.licensing(!0)):l.licensing(!1)},t)},e.prototype.bootstart=function(){m.prototype.bootstart.call(this),l.populateDataOnStart(),h.hideLoading(),u.settingsGet("AllowAdminPanel")?h.startScreens(u.settingsGet("Auth")?[d]:[g]):(h.routeOff(),h.setHash(c.root(),!0),h.routeOff(),n.defer(function(){s.location.href="/"})),s.SimplePace&&s.SimplePace.set(100)},t.exports=new e}()},18:function(t,e,i){!function(){"use strict";function e(){o.call(this),this.domainsLoading=n.observable(!1).extend({throttle:100}),this.domains=n.observableArray([]),this.pluginsLoading=n.observable(!1).extend({throttle:100}),this.plugins=n.observableArray([]),this.packagesReal=n.observable(!0),this.packagesMainUpdatable=n.observable(!0),this.packagesLoading=n.observable(!1).extend({throttle:100}),this.packages=n.observableArray([]),this.coreReal=n.observable(!0),this.coreUpdatable=n.observable(!0),this.coreAccess=n.observable(!0),this.coreChecking=n.observable(!1).extend({throttle:100}),this.coreUpdating=n.observable(!1).extend({throttle:100}),this.coreRemoteVersion=n.observable(""),this.coreRemoteRelease=n.observable(""),this.coreVersionCompare=n.observable(-2),this.licensing=n.observable(!1),this.licensingProcess=n.observable(!1),this.licenseValid=n.observable(!1),this.licenseExpired=n.observable(0),this.licenseError=n.observable(""),this.licenseTrigger=n.observable(!1),this.adminManLoading=n.computed(function(){return"000"!==[this.domainsLoading()?"1":"0",this.pluginsLoading()?"1":"0",this.packagesLoading()?"1":"0"].join("")},this),this.adminManLoadingVisibility=n.computed(function(){return this.adminManLoading()?"visible":"hidden"},this).extend({rateLimit:300})}var s=i(2),n=i(3),o=i(39);s.extend(e.prototype,o.prototype),e.prototype.populateDataOnStart=function(){o.prototype.populateDataOnStart.call(this)},t.exports=new e}()},29:function(t,e,i){!function(){"use strict";function e(t){l.call(this,"settings",t),this.menu=o.observableArray([]),this.oCurrentSubScreen=null,this.oViewModelPlace=null,this.setupSettings()}var s=i(2),n=i(14),o=i(3),a=i(7),r=i(1),c=i(11),u=i(5),l=i(24);s.extend(e.prototype,l.prototype),e.prototype.setupSettings=function(t){t&&t()},e.prototype.onRoute=function(t){var e=this,i=null,l=null,p=null,d=null;l=s.find(a.aViewModels.settings,function(e){return e&&e.__rlSettingsData&&t===e.__rlSettingsData.Route}),l&&(s.find(a.aViewModels["settings-removed"],function(t){return t&&t===l})&&(l=null),l&&s.find(a.aViewModels["settings-disabled"],function(t){return t&&t===l})&&(l=null)),l?(l.__builded&&l.__vm?i=l.__vm:(p=this.oViewModelPlace,p&&1===p.length?(i=new l,d=n("<div></div>").addClass("rl-settings-view-model").hide(),d.appendTo(p),i.viewModelDom=d,i.__rlSettingsData=l.__rlSettingsData,l.__dom=d,l.__builded=!0,l.__vm=i,o.applyBindingAccessorsToNode(d[0],{i18nInit:!0,template:function(){return{name:l.__rlSettingsData.Template}}},i),r.delegateRun(i,"onBuild",[d])):r.log("Cannot find sub settings view model position: SettingsSubScreen")),i&&s.defer(function(){e.oCurrentSubScreen&&(r.delegateRun(e.oCurrentSubScreen,"onHide"),e.oCurrentSubScreen.viewModelDom.hide()),e.oCurrentSubScreen=i,e.oCurrentSubScreen&&(e.oCurrentSubScreen.viewModelDom.show(),r.delegateRun(e.oCurrentSubScreen,"onShow"),r.delegateRun(e.oCurrentSubScreen,"onFocus",[],200),s.each(e.menu(),function(t){t.selected(i&&i.__rlSettingsData&&t.route===i.__rlSettingsData.Route)}),n("#rl-content .b-settings .b-content .content").scrollTop(0)),r.windowResize()})):u.setHash(c.settings(),!1,!0)},e.prototype.onHide=function(){this.oCurrentSubScreen&&this.oCurrentSubScreen.viewModelDom&&(r.delegateRun(this.oCurrentSubScreen,"onHide"),this.oCurrentSubScreen.viewModelDom.hide())},e.prototype.onBuild=function(){s.each(a.aViewModels.settings,function(t){t&&t.__rlSettingsData&&!s.find(a.aViewModels["settings-removed"],function(e){return e&&e===t})&&this.menu.push({route:t.__rlSettingsData.Route,label:t.__rlSettingsData.Label,selected:o.observable(!1),disabled:!!s.find(a.aViewModels["settings-disabled"],function(e){return e&&e===t})})},this),this.oViewModelPlace=n("#rl-content #rl-settings-subscreen")},e.prototype.routes=function(){var t=s.find(a.aViewModels.settings,function(t){return t&&t.__rlSettingsData&&t.__rlSettingsData.IsDefault}),e=t?t.__rlSettingsData.Route:"general",i={subname:/^(.*)$/,normalize_:function(t,i){return i.subname=r.isUnd(i.subname)?e:r.pString(i.subname),[i.subname]}};return[["{subname}/",i],["{subname}",i],["",i]]},t.exports=e}()},62:function(t,e,i){!function(){"use strict";function e(){n.call(this,"login",[i(93)])}var s=i(2),n=i(24);s.extend(e.prototype,n.prototype),e.prototype.onShow=function(){i(16).setTitle("")},t.exports=e}()},63:function(t,e,i){!function(){"use strict";function e(){o.call(this,[i(94),i(95)])}var s=i(2),n=i(5),o=i(29);s.extend(e.prototype,o.prototype),e.prototype.setupSettings=function(t){n.addSettingsViewModel(i(71),"AdminSettingsGeneral","General","general",!0),n.addSettingsViewModel(i(73),"AdminSettingsLogin","Login","login"),n.addSettingsViewModel(i(68),"AdminSettingsBranding","Branding","branding"),n.addSettingsViewModel(i(69),"AdminSettingsContacts","Contacts","contacts"),n.addSettingsViewModel(i(70),"AdminSettingsDomains","Domains","domains"),n.addSettingsViewModel(i(76),"AdminSettingsSecurity","Security","security"),n.addSettingsViewModel(i(77),"AdminSettingsSocial","Social","social"),n.addSettingsViewModel(i(75),"AdminSettingsPlugins","Plugins","plugins"),n.addSettingsViewModel(i(74),"AdminSettingsPackages","Packages","packages"),n.addSettingsViewModel(i(72),"AdminSettingsLicensing","Licensing","licensing"),n.addSettingsViewModel(i(67),"AdminSettingsAbout","About","about"),t&&t()},e.prototype.onShow=function(){i(16).setTitle("")},t.exports=e}()},67:function(t,e,i){!function(){"use strict";function e(){var t=i(10),e=i(18);this.version=s.observable(t.settingsGet("Version")),this.access=s.observable(!!t.settingsGet("CoreAccess")),this.errorDesc=s.observable(""),this.coreReal=e.coreReal,this.coreUpdatable=e.coreUpdatable,this.coreAccess=e.coreAccess,this.coreChecking=e.coreChecking,this.coreUpdating=e.coreUpdating,this.coreRemoteVersion=e.coreRemoteVersion,this.coreRemoteRelease=e.coreRemoteRelease,this.coreVersionCompare=e.coreVersionCompare,this.statusType=s.computed(function(){var t="",e=this.coreVersionCompare(),i=this.coreChecking(),s=this.coreUpdating(),n=this.coreReal();return i?t="checking":s?t="updating":n&&0===e?t="up-to-date":n&&-1===e?t="available":n||(t="error",this.errorDesc("Cannot access the repository at the moment.")),t},this)}var s=i(3);e.prototype.onBuild=function(){this.access()&&i(16).reloadCoreData()},e.prototype.updateCoreData=function(){this.coreUpdating()||i(16).updateCoreData()},t.exports=e}()},68:function(t,e,i){!function(){"use strict";function e(){var t=i(6),e=i(10);this.title=n.observable(e.settingsGet("Title")),this.title.trigger=n.observable(t.SaveSettingsStep.Idle),this.loadingDesc=n.observable(e.settingsGet("LoadingDescription")),this.loadingDesc.trigger=n.observable(t.SaveSettingsStep.Idle),this.loginLogo=n.observable(e.settingsGet("LoginLogo")),this.loginLogo.trigger=n.observable(t.SaveSettingsStep.Idle),this.loginDescription=n.observable(e.settingsGet("LoginDescription")),this.loginDescription.trigger=n.observable(t.SaveSettingsStep.Idle),this.loginCss=n.observable(e.settingsGet("LoginCss")),this.loginCss.trigger=n.observable(t.SaveSettingsStep.Idle)}var s=i(2),n=i(3),o=i(1);e.prototype.onBuild=function(){var t=this,e=i(15);s.delay(function(){var i=o.settingsSaveHelperSimpleFunction(t.title.trigger,t),s=o.settingsSaveHelperSimpleFunction(t.loadingDesc.trigger,t),n=o.settingsSaveHelperSimpleFunction(t.loginLogo.trigger,t),a=o.settingsSaveHelperSimpleFunction(t.loginDescription.trigger,t),r=o.settingsSaveHelperSimpleFunction(t.loginCss.trigger,t);t.title.subscribe(function(t){e.saveAdminConfig(i,{Title:o.trim(t)})}),t.loadingDesc.subscribe(function(t){e.saveAdminConfig(s,{LoadingDescription:o.trim(t)})}),t.loginLogo.subscribe(function(t){e.saveAdminConfig(n,{LoginLogo:o.trim(t)})}),t.loginDescription.subscribe(function(t){e.saveAdminConfig(a,{LoginDescription:o.trim(t)})}),t.loginCss.subscribe(function(t){e.saveAdminConfig(r,{LoginCss:o.trim(t)})})},50)},t.exports=e}()},69:function(t,e,i){!function(){"use strict";function e(){var t=i(15);this.defautOptionsAfterRender=a.defautOptionsAfterRender,this.enableContacts=n.observable(!!r.settingsGet("ContactsEnable")),this.contactsSharing=n.observable(!!r.settingsGet("ContactsSharing")),this.contactsSync=n.observable(!!r.settingsGet("ContactsSync"));var e=["sqlite","mysql","pgsql"],c=[],u=function(t){switch(t){case"sqlite":t="SQLite";break;case"mysql":t="MySQL";break;case"pgsql":t="PostgreSQL"}return t};r.settingsGet("SQLiteIsSupported")&&c.push("sqlite"),r.settingsGet("MySqlIsSupported")&&c.push("mysql"),r.settingsGet("PostgreSqlIsSupported")&&c.push("pgsql"),this.contactsSupported=0<c.length,this.contactsTypes=n.observableArray([]),this.contactsTypesOptions=this.contactsTypes.map(function(t){var e=-1===a.inArray(t,c);return{id:t,name:u(t)+(e?" (not supported)":""),disabled:e}}),this.contactsTypes(e),this.contactsType=n.observable(""),this.mainContactsType=n.computed({owner:this,read:this.contactsType,write:function(t){t!==this.contactsType()?-1<a.inArray(t,c)?this.contactsType(t):0<c.length&&this.contactsType(""):this.contactsType.valueHasMutated()}}),this.contactsType.subscribe(function(){this.testContactsSuccess(!1),this.testContactsError(!1),this.testContactsErrorMessage("")},this),this.pdoDsn=n.observable(r.settingsGet("ContactsPdoDsn")),this.pdoUser=n.observable(r.settingsGet("ContactsPdoUser")),this.pdoPassword=n.observable(r.settingsGet("ContactsPdoPassword")),this.pdoDsnTrigger=n.observable(o.SaveSettingsStep.Idle),this.pdoUserTrigger=n.observable(o.SaveSettingsStep.Idle),this.pdoPasswordTrigger=n.observable(o.SaveSettingsStep.Idle),this.contactsTypeTrigger=n.observable(o.SaveSettingsStep.Idle),this.testing=n.observable(!1),this.testContactsSuccess=n.observable(!1),this.testContactsError=n.observable(!1),this.testContactsErrorMessage=n.observable(""),this.testContactsCommand=a.createCommand(this,function(){this.testContactsSuccess(!1),this.testContactsError(!1),this.testContactsErrorMessage(""),this.testing(!0),t.testContacts(this.onTestContactsResponse,{ContactsPdoType:this.contactsType(),ContactsPdoDsn:this.pdoDsn(),ContactsPdoUser:this.pdoUser(),ContactsPdoPassword:this.pdoPassword()})},function(){return""!==this.pdoDsn()&&""!==this.pdoUser()}),this.contactsType(r.settingsGet("ContactsPdoType")),this.onTestContactsResponse=s.bind(this.onTestContactsResponse,this)}var s=i(2),n=i(3),o=i(6),a=i(1),r=i(10);e.prototype.onTestContactsResponse=function(t,e){this.testContactsSuccess(!1),this.testContactsError(!1),this.testContactsErrorMessage(""),o.StorageResultType.Success===t&&e&&e.Result&&e.Result.Result?this.testContactsSuccess(!0):(this.testContactsError(!0),this.testContactsErrorMessage(e&&e.Result?e.Result.Message||"":"")),this.testing(!1)},e.prototype.onShow=function(){this.testContactsSuccess(!1),this.testContactsError(!1),this.testContactsErrorMessage("")},e.prototype.onBuild=function(){var t=this,e=i(15);s.delay(function(){var i=a.settingsSaveHelperSimpleFunction(t.pdoDsnTrigger,t),s=a.settingsSaveHelperSimpleFunction(t.pdoUserTrigger,t),n=a.settingsSaveHelperSimpleFunction(t.pdoPasswordTrigger,t),o=a.settingsSaveHelperSimpleFunction(t.contactsTypeTrigger,t);t.enableContacts.subscribe(function(t){e.saveAdminConfig(null,{ContactsEnable:t?"1":"0"})}),t.contactsSharing.subscribe(function(t){e.saveAdminConfig(null,{ContactsSharing:t?"1":"0"})}),t.contactsSync.subscribe(function(t){e.saveAdminConfig(null,{ContactsSync:t?"1":"0"})}),t.contactsType.subscribe(function(t){e.saveAdminConfig(o,{ContactsPdoType:t})}),t.pdoDsn.subscribe(function(t){e.saveAdminConfig(i,{ContactsPdoDsn:a.trim(t)})}),t.pdoUser.subscribe(function(t){e.saveAdminConfig(s,{ContactsPdoUser:a.trim(t)})}),t.pdoPassword.subscribe(function(t){e.saveAdminConfig(n,{ContactsPdoPassword:a.trim(t)})}),t.contactsType(r.settingsGet("ContactsPdoType"))},50)},t.exports=e}()},70:function(t,e,i){!function(){"use strict";function e(){this.domains=c.domains,this.domainsLoading=c.domainsLoading,this.iDomainForDeletionTimeout=0,this.visibility=o.computed(function(){return c.domainsLoading()?"visible":"hidden"},this),this.domainForDeletion=o.observable(null).extend({toggleSubscribe:[this,function(t){t&&t.deleteAccess(!1)},function(t){t&&(t.deleteAccess(!0),this.startDomainForDeletionTimeout())}]})}var s=i(12),n=i(2),o=i(3),a=i(6),r=i(105),c=i(18),u=i(15);e.prototype.startDomainForDeletionTimeout=function(){var t=this;s.clearInterval(this.iDomainForDeletionTimeout),this.iDomainForDeletionTimeout=s.setTimeout(function(){t.domainForDeletion(null)},3e3)},e.prototype.createDomain=function(){i(5).showScreenPopup(r)},e.prototype.deleteDomain=function(t){this.domains.remove(t),u.domainDelete(n.bind(this.onDomainListChangeRequest,this),t.name)},e.prototype.disableDomain=function(t){t.disabled(!t.disabled()),u.domainDisable(n.bind(this.onDomainListChangeRequest,this),t.name,t.disabled())},e.prototype.onBuild=function(t){var e=this;t.on("click",".b-admin-domains-list-table .e-item .e-action",function(){var t=o.dataFor(this);t&&u.domain(n.bind(e.onDomainLoadRequest,e),t.name)}),i(16).reloadDomainList()},e.prototype.onDomainLoadRequest=function(t,e){a.StorageResultType.Success===t&&e&&e.Result&&i(5).showScreenPopup(r,[e.Result])},e.prototype.onDomainListChangeRequest=function(){i(16).reloadDomainList()},t.exports=e}()},71:function(t,e,i){!function(){"use strict";function e(){this.mainLanguage=u.mainLanguage,this.mainTheme=u.mainTheme,this.language=u.language,this.theme=u.theme,this.allowLanguagesOnSettings=u.allowLanguagesOnSettings,this.capaThemes=u.capaThemes,this.capaGravatar=u.capaGravatar,this.capaAdditionalAccounts=u.capaAdditionalAccounts,this.capaAdditionalIdentities=u.capaAdditionalIdentities,this.mainAttachmentLimit=n.observable(a.pInt(c.settingsGet("AttachmentLimit"))/1048576).extend({posInterer:25}),this.uploadData=c.settingsGet("PhpUploadSizes"),this.uploadDataDesc=this.uploadData&&(this.uploadData.upload_max_filesize||this.uploadData.post_max_size)?[this.uploadData.upload_max_filesize?"upload_max_filesize = "+this.uploadData.upload_max_filesize+"; ":"",this.uploadData.post_max_size?"post_max_size = "+this.uploadData.post_max_size:""].join(""):"",this.themesOptions=n.computed(function(){return s.map(u.themes(),function(t){return{optValue:t,optText:a.convertThemeName(t)}})}),this.mainLanguageFullName=n.computed(function(){return a.convertLangName(this.mainLanguage())},this),this.weakPassword=!!c.settingsGet("WeakPassword"),this.attachmentLimitTrigger=n.observable(o.SaveSettingsStep.Idle),this.languageTrigger=n.observable(o.SaveSettingsStep.Idle),this.themeTrigger=n.observable(o.SaveSettingsStep.Idle)}var s=i(2),n=i(3),o=i(6),a=i(1),r=i(11),c=i(10),u=i(18);e.prototype.onBuild=function(){var t=this,e=i(15);s.delay(function(){var i=a.settingsSaveHelperSimpleFunction(t.attachmentLimitTrigger,t),s=a.settingsSaveHelperSimpleFunction(t.languageTrigger,t),n=a.settingsSaveHelperSimpleFunction(t.themeTrigger,t);t.mainAttachmentLimit.subscribe(function(t){e.saveAdminConfig(i,{AttachmentLimit:a.pInt(t)})}),t.language.subscribe(function(t){e.saveAdminConfig(s,{Language:a.trim(t)})}),t.theme.subscribe(function(t){e.saveAdminConfig(n,{Theme:a.trim(t)})}),t.capaAdditionalAccounts.subscribe(function(t){e.saveAdminConfig(null,{CapaAdditionalAccounts:t?"1":"0"})}),t.capaAdditionalIdentities.subscribe(function(t){e.saveAdminConfig(null,{CapaAdditionalIdentities:t?"1":"0"})}),t.capaGravatar.subscribe(function(t){e.saveAdminConfig(null,{CapaGravatar:t?"1":"0"})}),t.capaThemes.subscribe(function(t){e.saveAdminConfig(null,{CapaThemes:t?"1":"0"})}),t.allowLanguagesOnSettings.subscribe(function(t){e.saveAdminConfig(null,{AllowLanguagesOnSettings:t?"1":"0"})})},50)},e.prototype.selectLanguage=function(){i(5).showScreenPopup(i(32))},e.prototype.phpInfoLink=function(){return r.phpInfo()},t.exports=e}()},72:function(t,e,i){!function(){"use strict";function e(){this.licensing=a.licensing,this.licensingProcess=a.licensingProcess,this.licenseValid=a.licenseValid,this.licenseExpired=a.licenseExpired,this.licenseError=a.licenseError,this.licenseTrigger=a.licenseTrigger,this.adminDomain=s.observable(""),this.subscriptionEnabled=s.observable(!!o.settingsGet("SubscriptionEnabled")),this.licenseTrigger.subscribe(function(){this.subscriptionEnabled()&&i(16).reloadLicensing(!0)},this)}var s=i(3),n=i(25),o=i(10),a=i(18);e.prototype.onBuild=function(){this.subscriptionEnabled()&&i(16).reloadLicensing(!1)},e.prototype.onShow=function(){this.adminDomain(o.settingsGet("AdminDomain"))},e.prototype.showActivationForm=function(){i(5).showScreenPopup(i(101))},e.prototype.licenseExpiredMomentValue=function(){var t=this.licenseExpired(),e=n.unix(t);return t&&1898625600===t?"Never":e.format("LL")+" ("+e.from(n())+")"},t.exports=e}()},73:function(t,e,i){!function(){"use strict";function e(){this.determineUserLanguage=c.determineUserLanguage,this.determineUserDomain=c.determineUserDomain,this.defaultDomain=n.observable(r.settingsGet("LoginDefaultDomain")),this.allowLanguagesOnLogin=c.allowLanguagesOnLogin,this.defaultDomainTrigger=n.observable(o.SaveSettingsStep.Idle)}var s=i(2),n=i(3),o=i(6),a=i(1),r=i(10),c=i(18);e.prototype.onBuild=function(){var t=this,e=i(15);s.delay(function(){var i=a.settingsSaveHelperSimpleFunction(t.defaultDomainTrigger,t);t.determineUserLanguage.subscribe(function(t){e.saveAdminConfig(null,{DetermineUserLanguage:t?"1":"0"})}),t.determineUserDomain.subscribe(function(t){e.saveAdminConfig(null,{DetermineUserDomain:t?"1":"0"})}),t.allowLanguagesOnLogin.subscribe(function(t){e.saveAdminConfig(null,{AllowLanguagesOnLogin:t?"1":"0"})}),t.defaultDomain.subscribe(function(t){e.saveAdminConfig(i,{LoginDefaultDomain:a.trim(t)})})},50)},t.exports=e}()},74:function(t,e,i){!function(){"use strict";function e(){this.packagesError=n.observable(""),this.packages=r.packages,this.packagesLoading=r.packagesLoading,this.packagesReal=r.packagesReal,this.packagesMainUpdatable=r.packagesMainUpdatable,this.packagesCurrent=this.packages.filter(function(t){return t&&""!==t.installed&&!t.compare}),this.packagesAvailableForUpdate=this.packages.filter(function(t){return t&&""!==t.installed&&!!t.compare}),this.packagesAvailableForInstallation=this.packages.filter(function(t){return t&&""===t.installed}),this.visibility=n.computed(function(){return r.packagesLoading()?"visible":"hidden"},this)}var s=i(12),n=i(3),o=i(6),a=i(1),r=i(18),c=i(15);e.prototype.onShow=function(){this.packagesError("")},e.prototype.onBuild=function(){i(16).reloadPackagesList()},e.prototype.requestHelper=function(t,e){var n=this;return function(c,u){o.StorageResultType.Success===c&&u&&u.Result||n.packagesError(u&&u.ErrorCode?a.getNotification(u.ErrorCode):a.getNotification(e?o.Notification.CantInstallPackage:o.Notification.CantDeletePackage)),_.each(r.packages(),function(e){e&&t&&e.loading()&&t.file===e.file&&(t.loading(!1),e.loading(!1))}),o.StorageResultType.Success===c&&u&&u.Result&&u.Result.Reload?s.location.reload():i(16).reloadPackagesList()}},e.prototype.deletePackage=function(t){t&&(t.loading(!0),c.packageDelete(this.requestHelper(t,!1),t))},e.prototype.installPackage=function(t){t&&(t.loading(!0),c.packageInstall(this.requestHelper(t,!0),t))},t.exports=e}()},75:function(t,e,i){!function(){"use strict";function e(){this.enabledPlugins=n.observable(!!r.settingsGet("EnabledPlugins")),this.pluginsError=n.observable(""),this.plugins=c.plugins,this.pluginsLoading=c.pluginsLoading,this.visibility=n.computed(function(){return c.pluginsLoading()?"visible":"hidden"},this),this.onPluginLoadRequest=s.bind(this.onPluginLoadRequest,this),this.onPluginDisableRequest=s.bind(this.onPluginDisableRequest,this)}var s=i(2),n=i(3),o=i(6),a=i(1),r=i(10),c=i(18),u=i(15);e.prototype.disablePlugin=function(t){t.disabled(!t.disabled()),u.pluginDisable(this.onPluginDisableRequest,t.name,t.disabled())},e.prototype.configurePlugin=function(t){u.plugin(this.onPluginLoadRequest,t.name)},e.prototype.onBuild=function(t){var e=this;t.on("click",".e-item .configure-plugin-action",function(){var t=n.dataFor(this);t&&e.configurePlugin(t)}).on("click",".e-item .disabled-plugin",function(){var t=n.dataFor(this);t&&e.disablePlugin(t)}),this.enabledPlugins.subscribe(function(t){u.saveAdminConfig(a.emptyFunction,{EnabledPlugins:t?"1":"0"})})},e.prototype.onShow=function(){this.pluginsError(""),i(16).reloadPluginList()},e.prototype.onPluginLoadRequest=function(t,e){o.StorageResultType.Success===t&&e&&e.Result&&i(5).showScreenPopup(i(109),[e.Result])},e.prototype.onPluginDisableRequest=function(t,e){o.StorageResultType.Success===t&&e&&!e.Result&&e.ErrorCode&&this.pluginsError(o.Notification.UnsupportedPluginPackage===e.ErrorCode&&e.ErrorMessage&&""!==e.ErrorMessage?e.ErrorMessage:a.getNotification(e.ErrorCode)),i(16).reloadPluginList()},t.exports=e}()},76:function(t,e,i){!function(){"use strict";function e(){this.useLocalProxyForExternalImages=u.useLocalProxyForExternalImages,this.capaOpenPGP=n.observable(c.capa(o.Capa.OpenPGP)),this.capaTwoFactorAuth=n.observable(c.capa(o.Capa.TwoFactor)),this.adminLogin=n.observable(c.settingsGet("AdminLogin")),this.adminPassword=n.observable(""),this.adminPasswordNew=n.observable(""),this.adminPasswordNew2=n.observable(""),this.adminPasswordNewError=n.observable(!1),this.adminPasswordUpdateError=n.observable(!1),this.adminPasswordUpdateSuccess=n.observable(!1),this.adminPassword.subscribe(function(){this.adminPasswordUpdateError(!1),this.adminPasswordUpdateSuccess(!1)},this),this.adminPasswordNew.subscribe(function(){this.adminPasswordUpdateError(!1),this.adminPasswordUpdateSuccess(!1),this.adminPasswordNewError(!1)},this),this.adminPasswordNew2.subscribe(function(){this.adminPasswordUpdateError(!1),this.adminPasswordUpdateSuccess(!1),this.adminPasswordNewError(!1)},this),this.saveNewAdminPasswordCommand=a.createCommand(this,function(){return this.adminPasswordNew()!==this.adminPasswordNew2()?(this.adminPasswordNewError(!0),!1):(this.adminPasswordUpdateError(!1),this.adminPasswordUpdateSuccess(!1),void l.saveNewAdminPassword(this.onNewAdminPasswordResponse,{Password:this.adminPassword(),NewPassword:this.adminPasswordNew()}))},function(){return""!==this.adminPassword()&&""!==this.adminPasswordNew()&&""!==this.adminPasswordNew2()}),this.onNewAdminPasswordResponse=s.bind(this.onNewAdminPasswordResponse,this)}var s=i(2),n=i(3),o=i(6),a=i(1),r=i(11),c=i(10),u=i(18),l=i(15);e.prototype.onNewAdminPasswordResponse=function(t,e){o.StorageResultType.Success===t&&e&&e.Result?(this.adminPassword(""),this.adminPasswordNew(""),this.adminPasswordNew2(""),this.adminPasswordUpdateSuccess(!0)):this.adminPasswordUpdateError(!0)},e.prototype.onBuild=function(){var t=i(15);this.capaOpenPGP.subscribe(function(e){t.saveAdminConfig(a.emptyFunction,{CapaOpenPGP:e?"1":"0"})}),this.capaTwoFactorAuth.subscribe(function(e){t.saveAdminConfig(a.emptyFunction,{CapaTwoFactorAuth:e?"1":"0"})}),this.useLocalProxyForExternalImages.subscribe(function(e){t.saveAdminConfig(null,{UseLocalProxyForExternalImages:e?"1":"0"})})},e.prototype.onHide=function(){this.adminPassword(""),this.adminPasswordNew(""),this.adminPasswordNew2("")},e.prototype.phpInfoLink=function(){return r.phpInfo()},t.exports=e}()},77:function(t,e,i){!function(){"use strict";function e(){var t=i(18);this.googleEnable=t.googleEnable,this.googleClientID=t.googleClientID,this.googleApiKey=t.googleApiKey,this.googleClientSecret=t.googleClientSecret,this.googleTrigger1=n.observable(o.SaveSettingsStep.Idle),this.googleTrigger2=n.observable(o.SaveSettingsStep.Idle),this.googleTrigger3=n.observable(o.SaveSettingsStep.Idle),this.facebookSupported=t.facebookSupported,this.facebookEnable=t.facebookEnable,this.facebookAppID=t.facebookAppID,this.facebookAppSecret=t.facebookAppSecret,this.facebookTrigger1=n.observable(o.SaveSettingsStep.Idle),this.facebookTrigger2=n.observable(o.SaveSettingsStep.Idle),this.twitterEnable=t.twitterEnable,this.twitterConsumerKey=t.twitterConsumerKey,this.twitterConsumerSecret=t.twitterConsumerSecret,this.twitterTrigger1=n.observable(o.SaveSettingsStep.Idle),this.twitterTrigger2=n.observable(o.SaveSettingsStep.Idle),this.dropboxEnable=t.dropboxEnable,this.dropboxApiKey=t.dropboxApiKey,this.dropboxTrigger1=n.observable(o.SaveSettingsStep.Idle)}var s=i(2),n=i(3),o=i(6),a=i(1);e.prototype.onBuild=function(){var t=this,e=i(15);s.delay(function(){var i=a.settingsSaveHelperSimpleFunction(t.facebookTrigger1,t),s=a.settingsSaveHelperSimpleFunction(t.facebookTrigger2,t),n=a.settingsSaveHelperSimpleFunction(t.twitterTrigger1,t),o=a.settingsSaveHelperSimpleFunction(t.twitterTrigger2,t),r=a.settingsSaveHelperSimpleFunction(t.googleTrigger1,t),c=a.settingsSaveHelperSimpleFunction(t.googleTrigger2,t),u=a.settingsSaveHelperSimpleFunction(t.googleTrigger3,t),l=a.settingsSaveHelperSimpleFunction(t.dropboxTrigger1,t);t.facebookEnable.subscribe(function(i){t.facebookSupported()&&e.saveAdminConfig(a.emptyFunction,{FacebookEnable:i?"1":"0"})}),t.facebookAppID.subscribe(function(s){t.facebookSupported()&&e.saveAdminConfig(i,{FacebookAppID:a.trim(s)})}),t.facebookAppSecret.subscribe(function(i){t.facebookSupported()&&e.saveAdminConfig(s,{FacebookAppSecret:a.trim(i)})}),t.twitterEnable.subscribe(function(t){e.saveAdminConfig(a.emptyFunction,{TwitterEnable:t?"1":"0"})}),t.twitterConsumerKey.subscribe(function(t){e.saveAdminConfig(n,{TwitterConsumerKey:a.trim(t)})}),t.twitterConsumerSecret.subscribe(function(t){e.saveAdminConfig(o,{TwitterConsumerSecret:a.trim(t)})}),t.googleEnable.subscribe(function(t){e.saveAdminConfig(a.emptyFunction,{GoogleEnable:t?"1":"0"})}),t.googleClientID.subscribe(function(t){e.saveAdminConfig(r,{GoogleClientID:a.trim(t)})}),t.googleClientSecret.subscribe(function(t){e.saveAdminConfig(c,{GoogleClientSecret:a.trim(t)})}),t.googleApiKey.subscribe(function(t){e.saveAdminConfig(u,{GoogleApiKey:a.trim(t)})}),t.dropboxEnable.subscribe(function(t){e.saveAdminConfig(a.emptyFunction,{DropboxEnable:t?"1":"0"})}),t.dropboxApiKey.subscribe(function(t){e.saveAdminConfig(l,{DropboxApiKey:a.trim(t)})})},50)},t.exports=e}()},93:function(t,e,i){!function(){"use strict";function e(){u.call(this,"Center","AdminLogin"),this.login=n.observable(""),this.password=n.observable(""),this.loginError=n.observable(!1),this.passwordError=n.observable(!1),this.loginFocus=n.observable(!1),this.login.subscribe(function(){this.loginError(!1)
},this),this.password.subscribe(function(){this.passwordError(!1)},this),this.submitRequest=n.observable(!1),this.submitError=n.observable(""),this.submitCommand=a.createCommand(this,function(){return a.triggerAutocompleteInputChange(),this.loginError(""===a.trim(this.login())),this.passwordError(""===a.trim(this.password())),this.loginError()||this.passwordError()?!1:(this.submitRequest(!0),r.adminLogin(s.bind(function(t,e){o.StorageResultType.Success===t&&e&&"AdminLogin"===e.Action?e.Result?i(16).loginAndLogoutReload():e.ErrorCode&&(this.submitRequest(!1),this.submitError(a.getNotification(e.ErrorCode))):(this.submitRequest(!1),this.submitError(a.getNotification(o.Notification.UnknownError)))},this),this.login(),this.password()),!0)},function(){return!this.submitRequest()}),c.constructorEnd(this)}var s=i(2),n=i(3),o=i(6),a=i(1),r=i(15),c=i(5),u=i(9);c.extendAsViewModel(["View:Admin:Login","AdminLoginViewModel"],e),s.extend(e.prototype,u.prototype),e.prototype.onShow=function(){c.routeOff(),s.delay(s.bind(function(){this.loginFocus(!0)},this),100)},e.prototype.onHide=function(){this.loginFocus(!1)},e.prototype.onBuild=function(){a.triggerAutocompleteInputChange(!0)},e.prototype.submitForm=function(){this.submitCommand()},t.exports=e}()},94:function(t,e,i){!function(){"use strict";function e(t){a.call(this,"Left","AdminMenu"),this.leftPanelDisabled=n.leftPanelDisabled,this.menu=t.menu,o.constructorEnd(this)}var s=i(2),n=i(7),o=i(5),a=i(9);o.extendAsViewModel(["View:Admin:SettingsMenu","AdminSettingsMenuViewModel"],e),s.extend(e.prototype,a.prototype),e.prototype.link=function(t){return"#/"+t},t.exports=e}()},95:function(t,e,i){!function(){"use strict";function e(){u.call(this,"Right","AdminPane"),this.adminDomain=n.observable(o.settingsGet("AdminDomain")),this.version=n.observable(o.settingsGet("Version")),this.adminManLoadingVisibility=a.adminManLoadingVisibility,c.constructorEnd(this)}var s=i(2),n=i(3),o=i(10),a=i(18),r=i(15),c=i(5),u=i(9);c.extendAsViewModel(["View:Admin:SettingsPane","AdminSettingsPaneViewModel"],e),s.extend(e.prototype,u.prototype),e.prototype.logoutClick=function(){r.adminLogout(function(){i(16).loginAndLogoutReload()})},t.exports=e}()},101:function(t,e,i){!function(){"use strict";function e(){p.call(this,"Popups","PopupsActivate");var t=this;this.domain=n.observable(""),this.key=n.observable(""),this.key.focus=n.observable(!1),this.activationSuccessed=n.observable(!1),this.licenseTrigger=c.licenseTrigger,this.activateProcess=n.observable(!1),this.activateText=n.observable(""),this.activateText.isError=n.observable(!1),this.key.subscribe(function(){this.activateText(""),this.activateText.isError(!1)},this),this.activationSuccessed.subscribe(function(t){t&&this.licenseTrigger(!this.licenseTrigger())},this),this.activateCommand=a.createCommand(this,function(){this.activateProcess(!0),this.validateSubscriptionKey()?u.licensingActivate(function(e,i){t.activateProcess(!1),o.StorageResultType.Success===e&&i.Result?!0===i.Result?(t.activationSuccessed(!0),t.activateText("Subscription Key Activated Successfully"),t.activateText.isError(!1)):(t.activateText(i.Result),t.activateText.isError(!0),t.key.focus(!0)):i.ErrorCode?(t.activateText(a.getNotification(i.ErrorCode)),t.activateText.isError(!0),t.key.focus(!0)):(t.activateText(a.getNotification(o.Notification.UnknownError)),t.activateText.isError(!0),t.key.focus(!0))},this.domain(),this.key()):(this.activateProcess(!1),this.activateText("Invalid Subscription Key"),this.activateText.isError(!0),this.key.focus(!0))},function(){return!this.activateProcess()&&""!==this.domain()&&""!==this.key()&&!this.activationSuccessed()}),l.constructorEnd(this)}var s=i(2),n=i(3),o=i(6),a=i(1),r=i(10),c=i(18),u=i(15),l=i(5),p=i(9);l.extendAsViewModel(["View:Popup:Activate","PopupsActivateViewModel"],e),s.extend(e.prototype,p.prototype),e.prototype.onShow=function(){this.domain(r.settingsGet("AdminDomain")),this.activateProcess()||(this.key(""),this.activateText(""),this.activateText.isError(!1),this.activationSuccessed(!1))},e.prototype.onFocus=function(){this.activateProcess()||this.key.focus(!0)},e.prototype.validateSubscriptionKey=function(){var t=this.key();return""===t||!!/^RL[\d]+-[A-Z0-9\-]+Z$/.test(a.trim(t))},t.exports=e}()},105:function(t,e,i){!function(){"use strict";function e(){l.call(this,"Popups","PopupsDomain"),this.edit=n.observable(!1),this.saving=n.observable(!1),this.savingError=n.observable(""),this.whiteListPage=n.observable(!1),this.testing=n.observable(!1),this.testingDone=n.observable(!1),this.testingImapError=n.observable(!1),this.testingSmtpError=n.observable(!1),this.testingImapErrorDesc=n.observable(""),this.testingSmtpErrorDesc=n.observable(""),this.testingImapError.subscribe(function(t){t||this.testingImapErrorDesc("")},this),this.testingSmtpError.subscribe(function(t){t||this.testingSmtpErrorDesc("")},this),this.testingImapErrorDesc=n.observable(""),this.testingSmtpErrorDesc=n.observable(""),this.imapServerFocus=n.observable(!1),this.smtpServerFocus=n.observable(!1),this.name=n.observable(""),this.name.focused=n.observable(!1),this.imapServer=n.observable(""),this.imapPort=n.observable(""+a.Values.ImapDefaulPort),this.imapSecure=n.observable(o.ServerSecure.None),this.imapShortLogin=n.observable(!1),this.smtpServer=n.observable(""),this.smtpPort=n.observable(""+a.Values.SmtpDefaulPort),this.smtpSecure=n.observable(o.ServerSecure.None),this.smtpShortLogin=n.observable(!1),this.smtpAuth=n.observable(!0),this.whiteList=n.observable(""),this.headerText=n.computed(function(){var t=this.name();return this.edit()?'Edit Domain "'+t+'"':"Add Domain"+(""===t?"":' "'+t+'"')},this),this.domainIsComputed=n.computed(function(){return""!==this.name()&&""!==this.imapServer()&&""!==this.imapPort()&&""!==this.smtpServer()&&""!==this.smtpPort()},this),this.canBeTested=n.computed(function(){return!this.testing()&&this.domainIsComputed()},this),this.canBeSaved=n.computed(function(){return!this.saving()&&this.domainIsComputed()},this),this.createOrAddCommand=r.createCommand(this,function(){this.saving(!0),c.createOrUpdateDomain(s.bind(this.onDomainCreateOrSaveResponse,this),!this.edit(),this.name(),this.imapServer(),r.pInt(this.imapPort()),this.imapSecure(),this.imapShortLogin(),this.smtpServer(),r.pInt(this.smtpPort()),this.smtpSecure(),this.smtpShortLogin(),this.smtpAuth(),this.whiteList())},this.canBeSaved),this.testConnectionCommand=r.createCommand(this,function(){this.whiteListPage(!1),this.testingDone(!1),this.testingImapError(!1),this.testingSmtpError(!1),this.testing(!0),c.testConnectionForDomain(s.bind(this.onTestConnectionResponse,this),this.name(),this.imapServer(),r.pInt(this.imapPort()),this.imapSecure(),this.smtpServer(),r.pInt(this.smtpPort()),this.smtpSecure(),this.smtpAuth())},this.canBeTested),this.whiteListCommand=r.createCommand(this,function(){this.whiteListPage(!this.whiteListPage())}),this.imapServerFocus.subscribe(function(t){t&&""!==this.name()&&""===this.imapServer()&&this.imapServer(this.name().replace(/[.]?[*][.]?/g,""))},this),this.smtpServerFocus.subscribe(function(t){t&&""!==this.imapServer()&&""===this.smtpServer()&&this.smtpServer(this.imapServer().replace(/imap/gi,"smtp"))},this),this.imapSecure.subscribe(function(t){var e=r.pInt(this.imapPort());switch(t=r.pString(t)){case"0":993===e&&this.imapPort("143");break;case"1":143===e&&this.imapPort("993")}},this),this.smtpSecure.subscribe(function(t){var e=r.pInt(this.smtpPort());switch(t=r.pString(t)){case"0":(465===e||587===e)&&this.smtpPort("25");break;case"1":(25===e||587===e)&&this.smtpPort("465");break;case"2":(25===e||465===e)&&this.smtpPort("587")}},this),u.constructorEnd(this)}var s=i(2),n=i(3),o=i(6),a=i(17),r=i(1),c=i(15),u=i(5),l=i(9);u.extendAsViewModel(["View:Popup:Domain","PopupsDomainViewModel"],e),s.extend(e.prototype,l.prototype),e.prototype.onTestConnectionResponse=function(t,e){this.testing(!1),o.StorageResultType.Success===t&&e.Result?(this.testingDone(!0),this.testingImapError(!0!==e.Result.Imap),this.testingSmtpError(!0!==e.Result.Smtp),this.testingImapError()&&e.Result.Imap&&this.testingImapErrorDesc(e.Result.Imap),this.testingSmtpError()&&e.Result.Smtp&&this.testingSmtpErrorDesc(e.Result.Smtp)):(this.testingImapError(!0),this.testingSmtpError(!0))},e.prototype.onDomainCreateOrSaveResponse=function(t,e){this.saving(!1),o.StorageResultType.Success===t&&e?e.Result?(i(16).reloadDomainList(),this.closeCommand()):o.Notification.DomainAlreadyExists===e.ErrorCode&&this.savingError("Domain already exists"):this.savingError("Unknown error")},e.prototype.onHide=function(){this.whiteListPage(!1)},e.prototype.onShow=function(t){this.saving(!1),this.whiteListPage(!1),this.testing(!1),this.testingDone(!1),this.testingImapError(!1),this.testingSmtpError(!1),this.clearForm(),t&&(this.edit(!0),this.name(r.trim(t.Name)),this.imapServer(r.trim(t.IncHost)),this.imapPort(""+r.pInt(t.IncPort)),this.imapSecure(r.trim(t.IncSecure)),this.imapShortLogin(!!t.IncShortLogin),this.smtpServer(r.trim(t.OutHost)),this.smtpPort(""+r.pInt(t.OutPort)),this.smtpSecure(r.trim(t.OutSecure)),this.smtpShortLogin(!!t.OutShortLogin),this.smtpAuth(!!t.OutAuth),this.whiteList(r.trim(t.WhiteList)))},e.prototype.onFocus=function(){""===this.name()&&this.name.focused(!0)},e.prototype.clearForm=function(){this.edit(!1),this.whiteListPage(!1),this.savingError(""),this.name(""),this.name.focused(!1),this.imapServer(""),this.imapPort(""+a.Values.ImapDefaulPort),this.imapSecure(o.ServerSecure.None),this.imapShortLogin(!1),this.smtpServer(""),this.smtpPort(""+a.Values.SmtpDefaulPort),this.smtpSecure(o.ServerSecure.None),this.smtpShortLogin(!1),this.smtpAuth(!0),this.whiteList("")},t.exports=e}()},109:function(t,e,i){!function(){"use strict";function e(){l.call(this,"Popups","PopupsPlugin");var t=this;this.onPluginSettingsUpdateResponse=s.bind(this.onPluginSettingsUpdateResponse,this),this.saveError=n.observable(""),this.name=n.observable(""),this.readme=n.observable(""),this.configures=n.observableArray([]),this.hasReadme=n.computed(function(){return""!==this.readme()},this),this.hasConfiguration=n.computed(function(){return 0<this.configures().length},this),this.readmePopoverConf={placement:"top",trigger:"hover",title:"About",content:function(){return t.readme()}},this.saveCommand=r.createCommand(this,function(){var t={};t.Name=this.name(),s.each(this.configures(),function(e){var i=e.value();(!1===i||!0===i)&&(i=i?"1":"0"),t["_"+e.Name]=i},this),this.saveError(""),c.pluginSettingsUpdate(this.onPluginSettingsUpdateResponse,t)},this.hasConfiguration),this.bDisabeCloseOnEsc=!0,this.sDefaultKeyScope=a.KeyState.All,this.tryToClosePopup=s.debounce(s.bind(this.tryToClosePopup,this),200),u.constructorEnd(this)}var s=i(2),n=i(3),o=i(19),a=i(6),r=i(1),c=i(15),u=i(5),l=i(9);u.extendAsViewModel(["View:Popup:Plugin","PopupsPluginViewModel"],e),s.extend(e.prototype,l.prototype),e.prototype.onPluginSettingsUpdateResponse=function(t,e){a.StorageResultType.Success===t&&e&&e.Result?this.cancelCommand():(this.saveError(""),this.saveError(e&&e.ErrorCode?r.getNotification(e.ErrorCode):r.getNotification(a.Notification.CantSavePluginSettings)))},e.prototype.onShow=function(t){if(this.name(),this.readme(),this.configures([]),t){this.name(t.Name),this.readme(t.Readme);var e=t.Config;r.isNonEmptyArray(e)&&this.configures(s.map(e,function(t){return{value:n.observable(t[0]),Name:t[1],Type:t[2],Label:t[3],Default:t[4],Desc:t[5]}}))}},e.prototype.tryToClosePopup=function(){var t=this,e=i(31);u.isPopupVisible(e)||u.showScreenPopup(e,[r.i18n("POPUPS_ASK/DESC_WANT_CLOSE_THIS_WINDOW"),function(){t.modalVisibility()&&r.delegateRun(t,"cancelCommand")}])},e.prototype.onBuild=function(){o("esc",a.KeyState.All,s.bind(function(){return this.modalVisibility()&&this.tryToClosePopup(),!1},this))},t.exports=e}()}});