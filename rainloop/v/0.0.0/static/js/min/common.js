/* RainLoop Webmail (c) RainLoop Team | Licensed under CC BY-NC-SA 3.0 */
!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(a,s){for(var r,l,c=0,u=[];c<a.length;c++)l=a[c],o[l]&&u.push.apply(u,o[l]),o[l]=0;for(r in s)e[r]=s[r];for(n&&n(a,s);u.length;)u.shift().call(null,t);s[0]&&(i[0]=0,t(0))};var i={},o={1:0};t.e=function(e,n){if(0===o[e])return n.call(null,t);if(void 0!==o[e])o[e].push(n);else{o[e]=[n];var i=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.src=t.p+""+{0:"701a517c70faed82fff3",2:"16ff7c35c340aa129a8c",3:"9970c7a3777d831f5c93"}[e]+".chunk.js",i.appendChild(a)}},t.m=e,t.c=i,t.p="rainloop/v/0.0.0/static/js/min/"}({1:function(e,t,n){!function(){"use strict";var t={},i=n(12),o=n(2),a=n(14),s=n(3),r=n(6),l=n(17),c=n(7);t.trim=a.trim,t.inArray=a.inArray,t.isArray=o.isArray,t.isFunc=o.isFunction,t.isUnd=o.isUndefined,t.isNull=o.isNull,t.emptyFunction=function(){},t.isNormal=function(e){return!t.isUnd(e)&&!t.isNull(e)},t.windowResize=o.debounce(function(e){t.isUnd(e)?c.$win.resize():i.setTimeout(function(){c.$win.resize()},e)},50),t.isPosNumeric=function(e,n){return t.isNormal(e)?(t.isUnd(n)?0:!n)?/^[1-9]+[0-9]*$/.test(e.toString()):/^[0-9]*$/.test(e.toString()):!1},t.pInt=function(e,n){var o=t.isNormal(e)&&""!==e?i.parseInt(e,10):n||0;return i.isNaN(o)?n||0:o},t.pString=function(e){return t.isNormal(e)?""+e:""},t.encodeURIComponent=function(e){return i.encodeURIComponent(e)},t.isNonEmptyArray=function(e){return t.isArray(e)&&0<e.length},t.notificationClass=function(){return i.Notification&&i.Notification.requestPermission?i.Notification:null},t.simpleQueryParser=function(e){var t={},n=[],o=[],a=0,s=0;for(n=e.split("&"),a=0,s=n.length;s>a;a++)o=n[a].split("="),t[i.decodeURIComponent(o[0])]=i.decodeURIComponent(o[1]);return t},t.mailToHelper=function(e,o){if(e&&"mailto:"===e.toString().substr(0,7).toLowerCase()){e=e.toString().substr(7);var a={},s=null,l=e.replace(/\?.+$/,""),c=e.replace(/^[^\?]*\?/,""),u=n(23);return s=new u,s.parse(i.decodeURIComponent(l)),s&&s.email&&(a=t.simpleQueryParser(c),n(5).showScreenPopup(o,[r.ComposeType.Empty,null,[s],t.isUnd(a.subject)?null:t.pString(a.subject),t.isUnd(a.body)?null:t.plainToHtml(t.pString(a.body))])),!0}return!1},t.rsaEncode=function(e,n,o,a){if(i.crypto&&i.crypto.getRandomValues&&i.RSAKey&&n&&o&&a){var s=new i.RSAKey;if(s.setPublic(a,o),e=s.encrypt(t.fakeMd5()+":"+e+":"+t.fakeMd5()),!1!==e)return"rsa:"+n+":"+e}return!1},t.rsaEncode.supported=!!(i.crypto&&i.crypto.getRandomValues&&i.RSAKey),t.exportPath=function(e,n,o){for(var a=null,s=e.split("."),r=o||i;s.length&&(a=s.shift());)s.length||t.isUnd(n)?r=r[a]?r[a]:r[a]={}:r[a]=n},t.pImport=function(e,t,n){e[t]=n},t.pExport=function(e,n,i){return t.isUnd(e[n])?i:e[n]},t.encodeHtml=function(e){return t.isNormal(e)?e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""},t.splitPlainText=function(e,n){var i="",o="",a=e,s=0,r=0;for(n=t.isUnd(n)?100:n;a.length>n;)o=a.substring(0,n),s=o.lastIndexOf(" "),r=o.lastIndexOf("\n"),-1!==r&&(s=r),-1===s&&(s=n),i+=o.substring(0,s)+"\n",a=a.substring(s+1);return i+a},t.timeOutAction=function(){var e={};return function(n,o,a){t.isUnd(e[n])&&(e[n]=0),i.clearTimeout(e[n]),e[n]=i.setTimeout(o,a)}}(),t.timeOutActionSecond=function(){var e={};return function(t,n,o){e[t]||(e[t]=i.setTimeout(function(){n(),e[t]=0},o))}}(),t.audio=function(){var e=!1;return function(t,n){if(!1===e)if(c.bIsiOSDevice)e=null;else{var o=!1,a=!1,s=i.Audio?new i.Audio:null;s&&s.canPlayType&&s.play?(o=""!==s.canPlayType('audio/mpeg; codecs="mp3"'),o||(a=""!==s.canPlayType('audio/ogg; codecs="vorbis"')),o||a?(e=s,e.preload="none",e.loop=!1,e.autoplay=!1,e.muted=!1,e.src=o?t:n):e=null):e=null}return e}}(),t.hos=function(e,t){return e&&i.Object&&i.Object.hasOwnProperty?i.Object.hasOwnProperty.call(e,t):!1},t.i18n=function(e,n,i){var o="",a=t.isUnd(c.oI18N[e])?t.isUnd(i)?e:i:c.oI18N[e];if(!t.isUnd(n)&&!t.isNull(n))for(o in n)t.hos(n,o)&&(a=a.replace("%"+o+"%",n[o]));return a},t.i18nToNode=function(e){o.defer(function(){a(".i18n",e).each(function(){var e=a(this),n="";n=e.data("i18n-text"),n?e.text(t.i18n(n)):(n=e.data("i18n-html"),n&&e.html(t.i18n(n)),n=e.data("i18n-placeholder"),n&&e.attr("placeholder",t.i18n(n)),n=e.data("i18n-title"),n&&e.attr("title",t.i18n(n)))})})},t.i18nReload=function(){i.rainloopI18N&&(c.oI18N=i.rainloopI18N||{},t.i18nToNode(c.$doc),c.langChangeTrigger(!c.langChangeTrigger())),i.rainloopI18N=null},t.initOnStartOrLangChange=function(e,t,n){e&&e.call(t),n?c.langChangeTrigger.subscribe(function(){e&&e.call(t),n.call(t)}):e&&c.langChangeTrigger.subscribe(e,t)},t.inFocus=function(){return i.document.activeElement?(t.isUnd(i.document.activeElement.__inFocusCache)&&(i.document.activeElement.__inFocusCache=a(i.document.activeElement).is("input,textarea,iframe,.cke_editable")),!!i.document.activeElement.__inFocusCache):!1},t.removeInFocus=function(){if(i.document&&i.document.activeElement&&i.document.activeElement.blur){var e=a(i.document.activeElement);e.is("input,textarea")&&i.document.activeElement.blur()}},t.removeSelection=function(){if(i&&i.getSelection){var e=i.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}else i.document&&i.document.selection&&i.document.selection.empty&&i.document.selection.empty()},t.replySubjectAdd=function(e,n){e=t.trim(e.toUpperCase()),n=t.trim(n.replace(/[\s]+/g," "));var i=!1,a=[],s="RE"===e,r="FWD"===e,l=!r;return""!==n&&o.each(n.split(":"),function(e){var n=t.trim(e);i||!/^(RE|FWD)$/i.test(n)&&!/^(RE|FWD)[\[\(][\d]+[\]\)]$/i.test(n)?(a.push(e),i=!0):(s||(s=!!/^RE/i.test(n)),r||(r=!!/^FWD/i.test(n)))}),l?s=!1:r=!1,t.trim((l?"Re: ":"Fwd: ")+(s?"Re: ":"")+(r?"Fwd: ":"")+t.trim(a.join(":")))},t.roundNumber=function(e,t){return i.Math.round(e*i.Math.pow(10,t))/i.Math.pow(10,t)},t.friendlySize=function(e){return e=t.pInt(e),e>=1073741824?t.roundNumber(e/1073741824,1)+"GB":e>=1048576?t.roundNumber(e/1048576,1)+"MB":e>=1024?t.roundNumber(e/1024,0)+"KB":e+"B"},t.log=function(e){i.console&&i.console.log&&i.console.log(e)},t.getNotification=function(e,n){return e=t.pInt(e),r.Notification.ClientViewError===e&&n?n:t.isUnd(c.oNotificationI18N[e])?"":c.oNotificationI18N[e]},t.initNotificationLanguage=function(){var e=c.oNotificationI18N||{};e[r.Notification.InvalidToken]=t.i18n("NOTIFICATIONS/INVALID_TOKEN"),e[r.Notification.AuthError]=t.i18n("NOTIFICATIONS/AUTH_ERROR"),e[r.Notification.AccessError]=t.i18n("NOTIFICATIONS/ACCESS_ERROR"),e[r.Notification.ConnectionError]=t.i18n("NOTIFICATIONS/CONNECTION_ERROR"),e[r.Notification.CaptchaError]=t.i18n("NOTIFICATIONS/CAPTCHA_ERROR"),e[r.Notification.SocialFacebookLoginAccessDisable]=t.i18n("NOTIFICATIONS/SOCIAL_FACEBOOK_LOGIN_ACCESS_DISABLE"),e[r.Notification.SocialTwitterLoginAccessDisable]=t.i18n("NOTIFICATIONS/SOCIAL_TWITTER_LOGIN_ACCESS_DISABLE"),e[r.Notification.SocialGoogleLoginAccessDisable]=t.i18n("NOTIFICATIONS/SOCIAL_GOOGLE_LOGIN_ACCESS_DISABLE"),e[r.Notification.DomainNotAllowed]=t.i18n("NOTIFICATIONS/DOMAIN_NOT_ALLOWED"),e[r.Notification.AccountNotAllowed]=t.i18n("NOTIFICATIONS/ACCOUNT_NOT_ALLOWED"),e[r.Notification.AccountTwoFactorAuthRequired]=t.i18n("NOTIFICATIONS/ACCOUNT_TWO_FACTOR_AUTH_REQUIRED"),e[r.Notification.AccountTwoFactorAuthError]=t.i18n("NOTIFICATIONS/ACCOUNT_TWO_FACTOR_AUTH_ERROR"),e[r.Notification.CouldNotSaveNewPassword]=t.i18n("NOTIFICATIONS/COULD_NOT_SAVE_NEW_PASSWORD"),e[r.Notification.CurrentPasswordIncorrect]=t.i18n("NOTIFICATIONS/CURRENT_PASSWORD_INCORRECT"),e[r.Notification.NewPasswordShort]=t.i18n("NOTIFICATIONS/NEW_PASSWORD_SHORT"),e[r.Notification.NewPasswordWeak]=t.i18n("NOTIFICATIONS/NEW_PASSWORD_WEAK"),e[r.Notification.NewPasswordForbidden]=t.i18n("NOTIFICATIONS/NEW_PASSWORD_FORBIDDENT"),e[r.Notification.ContactsSyncError]=t.i18n("NOTIFICATIONS/CONTACTS_SYNC_ERROR"),e[r.Notification.CantGetMessageList]=t.i18n("NOTIFICATIONS/CANT_GET_MESSAGE_LIST"),e[r.Notification.CantGetMessage]=t.i18n("NOTIFICATIONS/CANT_GET_MESSAGE"),e[r.Notification.CantDeleteMessage]=t.i18n("NOTIFICATIONS/CANT_DELETE_MESSAGE"),e[r.Notification.CantMoveMessage]=t.i18n("NOTIFICATIONS/CANT_MOVE_MESSAGE"),e[r.Notification.CantCopyMessage]=t.i18n("NOTIFICATIONS/CANT_MOVE_MESSAGE"),e[r.Notification.CantSaveMessage]=t.i18n("NOTIFICATIONS/CANT_SAVE_MESSAGE"),e[r.Notification.CantSendMessage]=t.i18n("NOTIFICATIONS/CANT_SEND_MESSAGE"),e[r.Notification.InvalidRecipients]=t.i18n("NOTIFICATIONS/INVALID_RECIPIENTS"),e[r.Notification.CantCreateFolder]=t.i18n("NOTIFICATIONS/CANT_CREATE_FOLDER"),e[r.Notification.CantRenameFolder]=t.i18n("NOTIFICATIONS/CANT_RENAME_FOLDER"),e[r.Notification.CantDeleteFolder]=t.i18n("NOTIFICATIONS/CANT_DELETE_FOLDER"),e[r.Notification.CantDeleteNonEmptyFolder]=t.i18n("NOTIFICATIONS/CANT_DELETE_NON_EMPTY_FOLDER"),e[r.Notification.CantSubscribeFolder]=t.i18n("NOTIFICATIONS/CANT_SUBSCRIBE_FOLDER"),e[r.Notification.CantUnsubscribeFolder]=t.i18n("NOTIFICATIONS/CANT_UNSUBSCRIBE_FOLDER"),e[r.Notification.CantSaveSettings]=t.i18n("NOTIFICATIONS/CANT_SAVE_SETTINGS"),e[r.Notification.CantSavePluginSettings]=t.i18n("NOTIFICATIONS/CANT_SAVE_PLUGIN_SETTINGS"),e[r.Notification.DomainAlreadyExists]=t.i18n("NOTIFICATIONS/DOMAIN_ALREADY_EXISTS"),e[r.Notification.CantInstallPackage]=t.i18n("NOTIFICATIONS/CANT_INSTALL_PACKAGE"),e[r.Notification.CantDeletePackage]=t.i18n("NOTIFICATIONS/CANT_DELETE_PACKAGE"),e[r.Notification.InvalidPluginPackage]=t.i18n("NOTIFICATIONS/INVALID_PLUGIN_PACKAGE"),e[r.Notification.UnsupportedPluginPackage]=t.i18n("NOTIFICATIONS/UNSUPPORTED_PLUGIN_PACKAGE"),e[r.Notification.LicensingServerIsUnavailable]=t.i18n("NOTIFICATIONS/LICENSING_SERVER_IS_UNAVAILABLE"),e[r.Notification.LicensingExpired]=t.i18n("NOTIFICATIONS/LICENSING_EXPIRED"),e[r.Notification.LicensingBanned]=t.i18n("NOTIFICATIONS/LICENSING_BANNED"),e[r.Notification.DemoSendMessageError]=t.i18n("NOTIFICATIONS/DEMO_SEND_MESSAGE_ERROR"),e[r.Notification.AccountAlreadyExists]=t.i18n("NOTIFICATIONS/ACCOUNT_ALREADY_EXISTS"),e[r.Notification.MailServerError]=t.i18n("NOTIFICATIONS/MAIL_SERVER_ERROR"),e[r.Notification.InvalidInputArgument]=t.i18n("NOTIFICATIONS/INVALID_INPUT_ARGUMENT"),e[r.Notification.UnknownNotification]=t.i18n("NOTIFICATIONS/UNKNOWN_ERROR"),e[r.Notification.UnknownError]=t.i18n("NOTIFICATIONS/UNKNOWN_ERROR")},t.getUploadErrorDescByCode=function(e){var n="";switch(t.pInt(e)){case r.UploadErrorCode.FileIsTooBig:n=t.i18n("UPLOAD/ERROR_FILE_IS_TOO_BIG");break;case r.UploadErrorCode.FilePartiallyUploaded:n=t.i18n("UPLOAD/ERROR_FILE_PARTIALLY_UPLOADED");break;case r.UploadErrorCode.FileNoUploaded:n=t.i18n("UPLOAD/ERROR_NO_FILE_UPLOADED");break;case r.UploadErrorCode.MissingTempFolder:n=t.i18n("UPLOAD/ERROR_MISSING_TEMP_FOLDER");break;case r.UploadErrorCode.FileOnSaveingError:n=t.i18n("UPLOAD/ERROR_ON_SAVING_FILE");break;case r.UploadErrorCode.FileType:n=t.i18n("UPLOAD/ERROR_FILE_TYPE");break;default:n=t.i18n("UPLOAD/ERROR_UNKNOWN")}return n},t.delegateRun=function(e,n,i,a){e&&e[n]&&(a=t.pInt(a),0>=a?e[n].apply(e,t.isArray(i)?i:[]):o.delay(function(){e[n].apply(e,t.isArray(i)?i:[])},a))},t.killCtrlAandS=function(e){if(e=e||i.event,e&&e.ctrlKey&&!e.shiftKey&&!e.altKey){var t=e.target||e.srcElement,n=e.keyCode||e.which;if(n===r.EventKeyCode.S)return void e.preventDefault();if(t&&t.tagName&&t.tagName.match(/INPUT|TEXTAREA/i))return;n===r.EventKeyCode.A&&(i.getSelection?i.getSelection().removeAllRanges():i.document.selection&&i.document.selection.clear&&i.document.selection.clear(),e.preventDefault())}},t.createCommand=function(e,n,i){var o=n?function(){return o&&o.canExecute&&o.canExecute()&&n.apply(e,Array.prototype.slice.call(arguments)),!1}:function(){};return o.enabled=s.observable(!0),i=t.isUnd(i)?!0:i,o.canExecute=s.computed(t.isFunc(i)?function(){return o.enabled()&&i.call(e)}:function(){return o.enabled()&&!!i}),o},t.initDataConstructorBySettings=function(e){e.editorDefaultType=s.observable(r.EditorDefaultType.Html),e.showImages=s.observable(!1),e.interfaceAnimation=s.observable(r.InterfaceAnimation.Full),e.contactsAutosave=s.observable(!1),c.sAnimationType=r.InterfaceAnimation.Full,e.capaThemes=s.observable(!1),e.allowLanguagesOnSettings=s.observable(!0),e.allowLanguagesOnLogin=s.observable(!0),e.useLocalProxyForExternalImages=s.observable(!1),e.desktopNotifications=s.observable(!1),e.useThreads=s.observable(!0),e.replySameFolder=s.observable(!0),e.useCheckboxesInList=s.observable(!0),e.layout=s.observable(r.Layout.SidePreview),e.usePreviewPane=s.computed(function(){return r.Layout.NoPreview!==e.layout()}),e.interfaceAnimation.subscribe(function(e){if(c.bMobileDevice||e===r.InterfaceAnimation.None)c.$html.removeClass("rl-anim rl-anim-full").addClass("no-rl-anim"),c.sAnimationType=r.InterfaceAnimation.None;else switch(e){case r.InterfaceAnimation.Full:c.$html.removeClass("no-rl-anim").addClass("rl-anim rl-anim-full"),c.sAnimationType=e;break;case r.InterfaceAnimation.Normal:c.$html.removeClass("no-rl-anim rl-anim-full").addClass("rl-anim"),c.sAnimationType=e}}),e.interfaceAnimation.valueHasMutated(),e.desktopNotificationsPermisions=s.computed(function(){e.desktopNotifications();var n=t.notificationClass(),o=r.DesktopNotifications.NotSupported;if(n&&n.permission)switch(n.permission.toLowerCase()){case"granted":o=r.DesktopNotifications.Allowed;break;case"denied":o=r.DesktopNotifications.Denied;break;case"default":o=r.DesktopNotifications.NotAllowed}else i.webkitNotifications&&i.webkitNotifications.checkPermission&&(o=i.webkitNotifications.checkPermission());return o}),e.useDesktopNotifications=s.computed({read:function(){return e.desktopNotifications()&&r.DesktopNotifications.Allowed===e.desktopNotificationsPermisions()},write:function(n){if(n){var i=t.notificationClass(),o=e.desktopNotificationsPermisions();i&&r.DesktopNotifications.Allowed===o?e.desktopNotifications(!0):i&&r.DesktopNotifications.NotAllowed===o?i.requestPermission(function(){e.desktopNotifications.valueHasMutated(),r.DesktopNotifications.Allowed===e.desktopNotificationsPermisions()?e.desktopNotifications()?e.desktopNotifications.valueHasMutated():e.desktopNotifications(!0):e.desktopNotifications()?e.desktopNotifications(!1):e.desktopNotifications.valueHasMutated()}):e.desktopNotifications(!1)}else e.desktopNotifications(!1)}}),e.language=s.observable(""),e.languages=s.observableArray([]),e.mainLanguage=s.computed({read:e.language,write:function(n){n!==e.language()?-1<t.inArray(n,e.languages())?e.language(n):0<e.languages().length&&e.language(e.languages()[0]):e.language.valueHasMutated()}}),e.theme=s.observable(""),e.themes=s.observableArray([]),e.mainTheme=s.computed({read:e.theme,write:function(n){if(n!==e.theme()){var i=e.themes();-1<t.inArray(n,i)?e.theme(n):0<i.length&&e.theme(i[0])}else e.theme.valueHasMutated()}}),e.capaAdditionalAccounts=s.observable(!1),e.capaAdditionalIdentities=s.observable(!1),e.capaGravatar=s.observable(!1),e.determineUserLanguage=s.observable(!1),e.determineUserDomain=s.observable(!1),e.messagesPerPage=s.observable(l.Defaults.MessagesPerPage),e.mainMessagesPerPage=e.messagesPerPage,e.mainMessagesPerPage=s.computed({read:e.messagesPerPage,write:function(n){-1<t.inArray(t.pInt(n),l.Defaults.MessagesPerPageArray)?n!==e.messagesPerPage()&&e.messagesPerPage(n):e.messagesPerPage.valueHasMutated()}}),e.facebookSupported=s.observable(!1),e.facebookEnable=s.observable(!1),e.facebookAppID=s.observable(""),e.facebookAppSecret=s.observable(""),e.twitterEnable=s.observable(!1),e.twitterConsumerKey=s.observable(""),e.twitterConsumerSecret=s.observable(""),e.googleEnable=s.observable(!1),e.googleClientID=s.observable(""),e.googleClientSecret=s.observable(""),e.googleApiKey=s.observable(""),e.dropboxEnable=s.observable(!1),e.dropboxApiKey=s.observable(""),e.contactsIsAllowed=s.observable(!1)},t.createMomentDate=function(e){return t.isUnd(e.moment)&&(e.moment=s.observable(moment())),s.computed(function(){c.momentTrigger();var e=this.moment();return 1970===e.year()?"":e.fromNow()},e)},t.createMomentShortDate=function(e){return s.computed(function(){var e="",n=moment(),i=this.moment(),o=this.momentDate();return e=1970===i.year()?"":4>=n.diff(i,"hours")?o:n.format("L")===i.format("L")?t.i18n("MESSAGE_LIST/TODAY_AT",{TIME:i.format("LT")}):n.clone().subtract("days",1).format("L")===i.format("L")?t.i18n("MESSAGE_LIST/YESTERDAY_AT",{TIME:i.format("LT")}):i.format(n.year()===i.year()?"D MMM.":"LL")},e)},t.convertThemeName=function(e){return"@custom"===e.substr(-7)&&(e=t.trim(e.substring(0,e.length-7))),t.trim(e.replace(/[^a-zA-Z0-9]+/g," ").replace(/([A-Z])/g," $1").replace(/[\s]+/g," "))},t.quoteName=function(e){return e.replace(/["]/g,'\\"')},t.microtime=function(){return(new Date).getTime()},t.convertLangName=function(e,n){return t.i18n("LANGS_NAMES"+(!0===n?"_EN":"")+"/LANG_"+e.toUpperCase().replace(/[^a-zA-Z0-9]+/g,"_"),null,e)},t.fakeMd5=function(e){var n="",o="0123456789abcdefghijklmnopqrstuvwxyz";for(e=t.isUnd(e)?32:t.pInt(e);n.length<e;)n+=o.substr(i.Math.round(i.Math.random()*o.length),1);return n},t.convertPlainTextToHtml=function(e){return e.toString().replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\r/g,"").replace(/\n/g,"<br />")},t.draggeblePlace=function(){return a('<div class="draggablePlace"><span class="text"></span>&nbsp;<i class="icon-copy icon-white visible-on-ctrl"></i><i class="icon-mail icon-white hidden-on-ctrl"></i></div>').appendTo("#rl-hidden")},t.defautOptionsAfterRender=function(e,n){n&&!t.isUnd(n.disabled)&&e&&a(e).toggleClass("disabled",n.disabled).prop("disabled",n.disabled)},t.windowPopupKnockout=function(e,n,o,r){var l=null,c=i.open(""),u="__OpenerApplyBindingsUid"+t.fakeMd5()+"__",p=a("#"+n);i[u]=function(){if(c&&c.document.body&&p&&p[0]){var n=a(c.document.body);a("#rl-content",n).html(p.html()),a("html",c.document).addClass("external "+a("html").attr("class")),t.i18nToNode(n),e&&a("#rl-content",n)[0]&&s.applyBindings(e,a("#rl-content",n)[0]),i[u]=null,r(c)}},c.document.open(),c.document.write('<html><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="user-scalable=no" /><meta name="apple-mobile-web-app-capable" content="yes" /><meta name="robots" content="noindex, nofollow, noodp" /><title>'+t.encodeHtml(o)+'</title></head><body><div id="rl-content"></div></body></html>'),c.document.close(),l=c.document.createElement("script"),l.type="text/javascript",l.innerHTML="if(window&&window.opener&&window.opener['"+u+"']){window.opener['"+u+"']();window.opener['"+u+"']=null}",c.document.getElementsByTagName("head")[0].appendChild(l)},t.settingsSaveHelperFunction=function(e,n,i,a){return i=i||null,a=t.isUnd(a)?1e3:t.pInt(a),function(t,s,l,c,u){n.call(i,s&&s.Result?r.SaveSettingsStep.TrueResult:r.SaveSettingsStep.FalseResult),e&&e.call(i,t,s,l,c,u),o.delay(function(){n.call(i,r.SaveSettingsStep.Idle)},a)}},t.settingsSaveHelperSimpleFunction=function(e,n){return t.settingsSaveHelperFunction(null,e,n,1e3)},t.htmlToPlain=function(e){var t=0,n=0,i=0,o=0,s=0,r="",l=function(e){for(var t=100,n="",i="",o=e,a=0,s=0;o.length>t;)i=o.substring(0,t),a=i.lastIndexOf(" "),s=i.lastIndexOf("\n"),-1!==s&&(a=s),-1===a&&(a=t),n+=i.substring(0,a)+"\n",o=o.substring(a+1);return n+o},u=function(e){return e=l(a.trim(e)),e="> "+e.replace(/\n/gm,"\n> "),e.replace(/(^|\n)([> ]+)/gm,function(){return arguments&&2<arguments.length?arguments[1]+a.trim(arguments[2].replace(/[\s]/g,""))+" ":""})},p=function(){if(arguments&&1<arguments.length){var e=a.trim(arguments[1]);return 0<e.length&&(e=e.replace(/<div[^>]*>([\s\S\r\n]*)<\/div>/gim,p),e="\n"+a.trim(e)+"\n"),e}return""},d=function(){return arguments&&1<arguments.length?arguments[1].toString().replace(/[\n]/gm,"<br />"):""},m=function(){return arguments&&1<arguments.length?""+arguments[1]+arguments[2].replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},f=function(){return arguments&&1<arguments.length?a.trim(arguments[1]):""};for(r=e.replace(/<pre[^>]*>([\s\S\r\n]*)<\/pre>/gim,d).replace(/[\s]+/gm," ").replace(/((?:href|data)\s?=\s?)("[^"]+?"|'[^']+?')/gim,m).replace(/<br[^>]*>/gim,"\n").replace(/<\/h[\d]>/gi,"\n").replace(/<\/p>/gi,"\n\n").replace(/<\/li>/gi,"\n").replace(/<\/td>/gi,"\n").replace(/<\/tr>/gi,"\n").replace(/<hr[^>]*>/gim,"\n_______________________________\n\n").replace(/<div[^>]*>([\s\S\r\n]*)<\/div>/gim,p).replace(/<blockquote[^>]*>/gim,"\n__bq__start__\n").replace(/<\/blockquote>/gim,"\n__bq__end__\n").replace(/<a [^>]*>([\s\S\r\n]*?)<\/a>/gim,f).replace(/<\/div>/gi,"\n").replace(/&nbsp;/gi," ").replace(/&quot;/gi,'"').replace(/<[^>]*>/gm,""),r=c.$div.html(r).text(),r=r.replace(/\n[ \t]+/gm,"\n").replace(/[\n]{3,}/gm,"\n\n").replace(/&gt;/gi,">").replace(/&lt;/gi,"<").replace(/&amp;/gi,"&"),t=0,s=100;s>0&&(s--,n=r.indexOf("__bq__start__",t),n>-1);)i=r.indexOf("__bq__start__",n+5),o=r.indexOf("__bq__end__",n+5),(-1===i||i>o)&&o>n?(r=r.substring(0,n)+u(r.substring(n+13,o))+r.substring(o+11),t=0):t=i>-1&&o>i?i-1:0;return r=r.replace(/__bq__start__/gm,"").replace(/__bq__end__/gm,"")},t.plainToHtml=function(e,n){e=e.toString().replace(/\r/g,"");var i=!1,o=!0,a=!0,s=[],r="",l=0,c=e.split("\n");do{for(o=!1,s=[],l=0;l<c.length;l++)r=c[l],a=">"===r.substr(0,1),a&&!i?(o=!0,i=!0,s.push("~~~blockquote~~~"),s.push(r.substr(1))):!a&&i?(i=!1,s.push("~~~/blockquote~~~"),s.push(r)):s.push(a&&i?r.substr(1):r);i&&(i=!1,s.push("~~~/blockquote~~~")),c=s}while(o);return e=c.join("\n"),e=e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/~~~blockquote~~~[\s]*/g,"<blockquote>").replace(/[\s]*~~~\/blockquote~~~/g,"</blockquote>").replace(/[\-_~]{10,}/g,"<hr />").replace(/\n/g,"<br />"),n?t.linkify(e):e},i.rainloop_Utils_htmlToPlain=t.htmlToPlain,i.rainloop_Utils_plainToHtml=t.plainToHtml,t.linkify=function(e){return a.fn&&a.fn.linkify&&(e=c.$div.html(e.replace(/&amp;/gi,"amp_amp_12345_amp_amp")).linkify().find(".linkified").removeClass("linkified").end().html().replace(/amp_amp_12345_amp_amp/g,"&amp;")),e},t.resizeAndCrop=function(e,t,n){var o=new i.Image;o.onload=function(){var e=[0,0],o=i.document.createElement("canvas"),a=o.getContext("2d");o.width=t,o.height=t,e=this.width>this.height?[this.width-this.height,0]:[0,this.height-this.width],a.fillStyle="#fff",a.fillRect(0,0,t,t),a.drawImage(this,e[0]/2,e[1]/2,this.width-e[0],this.height-e[1],0,0,t,t),n(o.toDataURL("image/jpeg"))},o.src=e},t.folderListOptionsBuilder=function(e,n,o,a,s,l,c,u,p,d){var m=null,f=!1,g=0,h=0,b="   ",S=[];for(p=t.isNormal(p)?p:0<e.length,d=t.isUnd(d)?!1:!!d,s=t.isNormal(s)?s:0,l=t.isNormal(l)?l:null,c=t.isNormal(c)?c:null,u=t.isNormal(u)?u:null,t.isArray(o)||(o=[]),t.isArray(a)||(a=[]),g=0,h=a.length;h>g;g++)S.push({id:a[g][0],name:a[g][1],system:!1,seporator:!1,disabled:!1});for(f=!0,g=0,h=e.length;h>g;g++)m=e[g],(c?c.call(null,m):!0)&&(f&&0<S.length&&S.push({id:"---",name:"---",system:!1,seporator:!0,disabled:!0}),f=!1,S.push({id:m.fullNameRaw,name:u?u.call(null,m):m.name(),system:!0,seporator:!1,disabled:!m.selectable||-1<t.inArray(m.fullNameRaw,o)||(l?l.call(null,m):!1)}));for(f=!0,g=0,h=n.length;h>g;g++)m=n[g],(m.subScribed()||!m.existen)&&(c?c.call(null,m):!0)&&(r.FolderType.User===m.type()||!p||0<m.subFolders().length)&&(f&&0<S.length&&S.push({id:"---",name:"---",system:!1,seporator:!0,disabled:!0}),f=!1,S.push({id:m.fullNameRaw,name:new i.Array(m.deep+1-s).join(b)+(u?u.call(null,m):m.name()),system:!1,seporator:!1,disabled:!m.selectable||-1<t.inArray(m.fullNameRaw,o)||(l?l.call(null,m):!1)})),m.subScribed()&&0<m.subFolders().length&&(S=S.concat(t.folderListOptionsBuilder([],m.subFolders(),o,[],s,l,c,u,p,d)));return S},t.computedPagenatorHelper=function(e,n){return function(){var o=0,a=0,s=2,r=[],l=e(),c=n(),u=function(e,n,i){var o={current:e===l,name:t.isUnd(i)?e.toString():i.toString(),custom:t.isUnd(i)?!1:!0,title:t.isUnd(i)?"":e.toString(),value:e.toString()};(t.isUnd(n)?0:!n)?r.unshift(o):r.push(o)};if(c>1||c>0&&l>c){for(l>c?(u(c),o=c,a=c):((3>=l||l>=c-2)&&(s+=2),u(l),o=l,a=l);s>0;)if(o-=1,a+=1,o>0&&(u(o,!1),s--),c>=a)u(a,!0),s--;else if(0>=o)break;3===o?u(2,!1):o>3&&u(i.Math.round((o-1)/2),!1,"..."),c-2===a?u(c-1,!0):c-2>a&&u(i.Math.round((c+a)/2),!0,"..."),o>1&&u(1,!1),c>a&&u(c,!0)}return r}},t.selectElement=function(e){var t,n;i.getSelection?(t=i.getSelection(),t.removeAllRanges(),n=i.document.createRange(),n.selectNodeContents(e),t.addRange(n)):i.document.selection&&(n=i.document.body.createTextRange(),n.moveToElementText(e),n.select())},t.detectDropdownVisibility=o.debounce(function(){c.dropdownVisibility(!!o.find(c.aBootstrapDropdowns,function(e){return e.hasClass("open")}))},50),t.triggerAutocompleteInputChange=function(e){var n=function(){a(".checkAutocomplete").trigger("change")};(t.isUnd(e)?1:!e)?n():o.delay(n,100)},e.exports=t}()},2:function(e){e.exports=_},3:function(e,t,n){!function(e,t){"use strict";var i=n(12),o=n(2),a=n(14);t.bindingHandlers.tooltip={init:function(e,i){var o=n(7),s=n(1);if(!o.bMobileDevice){var r=a(e),l=r.data("tooltip-class")||"",c=r.data("tooltip-placement")||"top";r.tooltip({delay:{show:500,hide:100},html:!0,container:"body",placement:c,trigger:"hover",title:function(){return r.is(".disabled")||o.dropdownVisibility()?"":'<span class="tooltip-class '+l+'">'+s.i18n(t.utils.unwrapObservable(i()))+"</span>"}}).click(function(){r.tooltip("hide")}),o.tooltipTrigger.subscribe(function(){r.tooltip("hide")})}}},t.bindingHandlers.tooltip2={init:function(e,t){var i=n(7),o=a(e),s=o.data("tooltip-class")||"",r=o.data("tooltip-placement")||"top";o.tooltip({delay:{show:500,hide:100},html:!0,container:"body",placement:r,title:function(){return o.is(".disabled")||i.dropdownVisibility()?"":'<span class="tooltip-class '+s+'">'+t()()+"</span>"}}).click(function(){o.tooltip("hide")}),i.tooltipTrigger.subscribe(function(){o.tooltip("hide")})}},t.bindingHandlers.tooltip3={init:function(e){var t=a(e),o=n(7);t.tooltip({container:"body",trigger:"hover manual",title:function(){return t.data("tooltip3-data")||""}}),a(i.document).click(function(){t.tooltip("hide")}),o.tooltipTrigger.subscribe(function(){t.tooltip("hide")})},update:function(e,n){var i=t.utils.unwrapObservable(n());""===i?a(e).data("tooltip3-data","").tooltip("hide"):a(e).data("tooltip3-data",i).tooltip("show")}},t.bindingHandlers.registrateBootstrapDropdown={init:function(e){var t=n(7);t.aBootstrapDropdowns.push(a(e))}},t.bindingHandlers.openDropdownTrigger={update:function(e,i){if(t.utils.unwrapObservable(i())){var o=a(e),s=n(1);o.hasClass("open")||(o.find(".dropdown-toggle").dropdown("toggle"),s.detectDropdownVisibility()),i()(!1)}}},t.bindingHandlers.dropdownCloser={init:function(e){a(e).closest(".dropdown").on("click",".e-item",function(){a(e).dropdown("toggle")})}},t.bindingHandlers.popover={init:function(e,n){a(e).popover(t.utils.unwrapObservable(n()))}},t.bindingHandlers.csstext={init:function(e,i){var o=n(1);e&&e.styleSheet&&!o.isUnd(e.styleSheet.cssText)?e.styleSheet.cssText=t.utils.unwrapObservable(i()):a(e).text(t.utils.unwrapObservable(i()))},update:function(e,i){var o=n(1);e&&e.styleSheet&&!o.isUnd(e.styleSheet.cssText)?e.styleSheet.cssText=t.utils.unwrapObservable(i()):a(e).text(t.utils.unwrapObservable(i()))}},t.bindingHandlers.resizecrop={init:function(e){a(e).addClass("resizecrop").resizecrop({width:"100",height:"100",wrapperCSS:{"border-radius":"10px"}})},update:function(e,t){t()(),a(e).resizecrop({width:"100",height:"100"})}},t.bindingHandlers.onEnter={init:function(e,t,n,o){a(e).on("keypress",function(n){n&&13===i.parseInt(n.keyCode,10)&&(a(e).trigger("change"),t().call(o))})}},t.bindingHandlers.onEsc={init:function(e,t,n,o){a(e).on("keypress",function(n){n&&27===i.parseInt(n.keyCode,10)&&(a(e).trigger("change"),t().call(o))})}},t.bindingHandlers.clickOnTrue={update:function(e,n){t.utils.unwrapObservable(n())&&a(e).click()}},t.bindingHandlers.modal={init:function(e,i){var o=n(7),s=n(1);a(e).toggleClass("fade",!o.bMobileDevice).modal({keyboard:!1,show:t.utils.unwrapObservable(i())}).on("shown",function(){s.windowResize()}).find(".close").click(function(){i()(!1)})},update:function(e,n){a(e).modal(t.utils.unwrapObservable(n())?"show":"hide")}},t.bindingHandlers.i18nInit={init:function(e){var t=n(1);t.i18nToNode(e)}},t.bindingHandlers.i18nUpdate={update:function(e,i){var o=n(1);t.utils.unwrapObservable(i()),o.i18nToNode(e)}},t.bindingHandlers.link={update:function(e,n){a(e).attr("href",t.utils.unwrapObservable(n()))}},t.bindingHandlers.title={update:function(e,n){a(e).attr("title",t.utils.unwrapObservable(n()))}},t.bindingHandlers.textF={init:function(e,n){a(e).text(t.utils.unwrapObservable(n()))}},t.bindingHandlers.initDom={init:function(e,t){t()(e)}},t.bindingHandlers.initResizeTrigger={init:function(e,n){var i=t.utils.unwrapObservable(n());a(e).css({height:i[1],"min-height":i[1]})},update:function(e,i){var o=n(1),s=n(7),r=t.utils.unwrapObservable(i()),l=o.pInt(r[1]),c=0,u=a(e).offset().top;u>0&&(u+=o.pInt(r[2]),c=s.$win.height()-u,c>l&&(l=c),a(e).css({height:l,"min-height":l}))}},t.bindingHandlers.appendDom={update:function(e,n){a(e).hide().empty().append(t.utils.unwrapObservable(n())).show()}},t.bindingHandlers.draggable={init:function(e,o,s){var r=n(7),l=n(1);if(!r.bMobileDevice){var c=100,u=3,p=s(),d=p&&p.droppableSelector?p.droppableSelector:"",m={distance:20,handle:".dragHandle",cursorAt:{top:22,left:3},refreshPositions:!0,scroll:!0};d&&(m.drag=function(e){a(d).each(function(){var t=null,n=null,o=a(this),s=o.offset(),r=s.top+o.height();i.clearInterval(o.data("timerScroll")),o.data("timerScroll",!1),e.pageX>=s.left&&e.pageX<=s.left+o.width()&&(e.pageY>=r-c&&e.pageY<=r&&(t=function(){o.scrollTop(o.scrollTop()+u),l.windowResize()},o.data("timerScroll",i.setInterval(t,10)),t()),e.pageY>=s.top&&e.pageY<=s.top+c&&(n=function(){o.scrollTop(o.scrollTop()-u),l.windowResize()},o.data("timerScroll",i.setInterval(n,10)),n()))})},m.stop=function(){a(d).each(function(){i.clearInterval(a(this).data("timerScroll")),a(this).data("timerScroll",!1)})}),m.helper=function(e){return o()(e&&e.target?t.dataFor(e.target):null)},a(e).draggable(m).on("mousedown",function(){l.removeInFocus()})}}},t.bindingHandlers.droppable={init:function(e,t,i){var o=n(7);if(!o.bMobileDevice){var s=t(),r=i(),l=r&&r.droppableOver?r.droppableOver:null,c=r&&r.droppableOut?r.droppableOut:null,u={tolerance:"pointer",hoverClass:"droppableHover"};s&&(u.drop=function(e,t){s(e,t)},l&&(u.over=function(e,t){l(e,t)}),c&&(u.out=function(e,t){c(e,t)}),a(e).droppable(u))}}},t.bindingHandlers.nano={init:function(e){var t=n(7);t.bDisableNanoScroll||a(e).addClass("nano").nanoScroller({iOSNativeScrolling:!1,preventPageScrolling:!0})}},t.bindingHandlers.saveTrigger={init:function(e){var t=a(e);t.data("save-trigger-type",t.is("input[type=text],input[type=email],input[type=password],select,textarea")?"input":"custom"),"custom"===t.data("save-trigger-type")?t.append('&nbsp;&nbsp;<i class="icon-spinner animated"></i><i class="icon-remove error"></i><i class="icon-ok success"></i>').addClass("settings-saved-trigger"):t.addClass("settings-saved-trigger-input")},update:function(e,n){var i=t.utils.unwrapObservable(n()),o=a(e);if("custom"===o.data("save-trigger-type"))switch(i.toString()){case"1":o.find(".animated,.error").hide().removeClass("visible").end().find(".success").show().addClass("visible");break;case"0":o.find(".animated,.success").hide().removeClass("visible").end().find(".error").show().addClass("visible");break;case"-2":o.find(".error,.success").hide().removeClass("visible").end().find(".animated").show().addClass("visible");break;default:o.find(".animated").hide().end().find(".error,.success").removeClass("visible")}else switch(i.toString()){case"1":o.addClass("success").removeClass("error");break;case"0":o.addClass("error").removeClass("success");break;case"-2":break;default:o.removeClass("error success")}}},t.bindingHandlers.emailsTags={init:function(e,t,i){var s=n(1),r=n(23),l=a(e),c=t(),u=i(),p=u.autoCompleteSource||null,d=function(e){c&&c.focusTrigger&&c.focusTrigger(e)
};l.inputosaurus({parseOnBlur:!0,allowDragAndDrop:!0,focusCallback:d,inputDelimiters:[",",";"],autoCompleteSource:p,parseHook:function(e){return o.map(e,function(e){var t=s.trim(e),n=null;return""!==t?(n=new r,n.mailsoParse(t),n.clearDuplicateName(),[n.toLine(!1),n]):[t,null]})},change:o.bind(function(e){l.data("EmailsTagsValue",e.target.value),c(e.target.value)},this)})},update:function(e,n,i){var o=a(e),s=i(),r=s.emailsTagsFilter||null,l=t.utils.unwrapObservable(n());o.data("EmailsTagsValue")!==l&&(o.val(l),o.data("EmailsTagsValue",l),o.inputosaurus("refresh")),r&&t.utils.unwrapObservable(r)&&o.inputosaurus("focus")}},t.bindingHandlers.contactTags={init:function(e,t,i){var s=n(1),r=n(37),l=a(e),c=t(),u=i(),p=u.autoCompleteSource||null,d=function(e){c&&c.focusTrigger&&c.focusTrigger(e)};l.inputosaurus({parseOnBlur:!0,allowDragAndDrop:!1,focusCallback:d,inputDelimiters:[",",";"],outputDelimiter:",",autoCompleteSource:p,parseHook:function(e){return o.map(e,function(e){var t=s.trim(e),n=null;return""!==t?(n=new r,n.name(t),[n.toLine(!1),n]):[t,null]})},change:o.bind(function(e){l.data("ContactTagsValue",e.target.value),c(e.target.value)},this)})},update:function(e,n,i){var o=a(e),s=i(),r=s.contactTagsFilter||null,l=t.utils.unwrapObservable(n());o.data("ContactTagsValue")!==l&&(o.val(l),o.data("ContactTagsValue",l),o.inputosaurus("refresh")),r&&t.utils.unwrapObservable(r)&&o.inputosaurus("focus")}},t.bindingHandlers.command={init:function(e,n,i,o){var s=a(e),r=n();if(!r||!r.enabled||!r.canExecute)throw new Error("You are not using command function");s.addClass("command"),t.bindingHandlers[s.is("form")?"submit":"click"].init.apply(o,arguments)},update:function(e,t){var n=!0,i=a(e),o=t();n=o.enabled(),i.toggleClass("command-not-enabled",!n),n&&(n=o.canExecute(),i.toggleClass("command-can-not-be-execute",!n)),i.toggleClass("command-disabled disable disabled",!n).toggleClass("no-disabled",!!n),(i.is("input")||i.is("button"))&&i.prop("disabled",!n)}},t.extenders.trimmer=function(e){var i=n(1),o=t.computed({read:e,write:function(t){e(i.trim(t.toString()))},owner:this});return o(e()),o},t.extenders.posInterer=function(e,i){var o=n(1),a=t.computed({read:e,write:function(t){var n=o.pInt(t.toString(),i);0>=n&&(n=i),n===e()&&""+n!=""+t&&e(n+1),e(n)}});return a(e()),a},t.extenders.reversible=function(e){var t=e();return e.commit=function(){t=e()},e.reverse=function(){e(t)},e.commitedValue=function(){return t},e},t.extenders.toggleSubscribe=function(e,t){return e.subscribe(t[1],t[0],"beforeChange"),e.subscribe(t[2],t[0]),e},t.extenders.falseTimeout=function(e,t){var o=n(1);return e.iTimeout=0,e.subscribe(function(n){n&&(i.clearTimeout(e.iTimeout),e.iTimeout=i.setTimeout(function(){e(!1),e.iTimeout=0},o.pInt(t)))}),e},t.observable.fn.validateNone=function(){return this.hasError=t.observable(!1),this},t.observable.fn.validateEmail=function(){var e=n(1);return this.hasError=t.observable(!1),this.subscribe(function(t){t=e.trim(t),this.hasError(""!==t&&!/^[^@\s]+@[^@\s]+$/.test(t))},this),this.valueHasMutated(),this},t.observable.fn.validateSimpleEmail=function(){var e=n(1);return this.hasError=t.observable(!1),this.subscribe(function(t){t=e.trim(t),this.hasError(""!==t&&!/^.+@.+$/.test(t))},this),this.valueHasMutated(),this},t.observable.fn.validateFunc=function(e){var i=n(1);return this.hasFuncError=t.observable(!1),i.isFunc(e)&&(this.subscribe(function(t){this.hasFuncError(!e(t))},this),this.valueHasMutated()),this},e.exports=t}(e,ko)},5:function(e,t,n){!function(){"use strict";function t(){this.oScreens={},this.sDefaultScreenName="",this.oCurrentScreen=null}var i=n(2),o=n(14),a=n(3),s=n(115),r=n(48),l=n(7),c=n(26),u=n(1);t.prototype.oScreens={},t.prototype.sDefaultScreenName="",t.prototype.oCurrentScreen=null,t.prototype.hideLoading=function(){o("#rl-loading").hide()},t.prototype.constructorEnd=function(e){u.isFunc(e.__constructor_end)&&e.__constructor_end.call(e)},t.prototype.extendAsViewModel=function(e,t){t&&(t.__names=u.isArray(e)?e:[e],t.__name=t.__names[0])},t.prototype.addSettingsViewModel=function(e,t,n,i,o){e.__rlSettingsData={Label:n,Template:t,Route:i,IsDefault:!!o},l.aViewModels.settings.push(e)},t.prototype.removeSettingsViewModel=function(e){l.aViewModels["settings-removed"].push(e)},t.prototype.disableSettingsViewModel=function(e){l.aViewModels["settings-disabled"].push(e)},t.prototype.routeOff=function(){s.changed.active=!1},t.prototype.routeOn=function(){s.changed.active=!0},t.prototype.screen=function(e){return""===e||u.isUnd(this.oScreens[e])?null:this.oScreens[e]},t.prototype.buildViewModel=function(e,t){if(e&&!e.__builded){var n=this,s=new e(t),r=s.viewModelPosition(),p=o("#rl-content #rl-"+r.toLowerCase()),d=null;e.__builded=!0,e.__vm=s,s.viewModelName=e.__name,s.viewModelNames=e.__names,p&&1===p.length?(d=o("<div></div>").addClass("rl-view-model").addClass("RL-"+s.viewModelTemplate()).hide(),d.appendTo(p),s.viewModelDom=d,e.__dom=d,"Popups"===r&&(s.cancelCommand=s.closeCommand=u.createCommand(s,function(){n.hideScreenPopup(e)}),s.modalVisibility.subscribe(function(e){var t=this;e?(this.viewModelDom.show(),this.storeAndSetKeyScope(),l.popupVisibilityNames.push(this.viewModelName),s.viewModelDom.css("z-index",3e3+l.popupVisibilityNames().length+10),u.delegateRun(this,"onFocus",[],500)):(u.delegateRun(this,"onHide"),this.restoreKeyScope(),i.each(this.viewModelNames,function(e){c.runHook("view-model-on-hide",[e,t])}),l.popupVisibilityNames.remove(this.viewModelName),s.viewModelDom.css("z-index",2e3),l.tooltipTrigger(!l.tooltipTrigger()),i.delay(function(){t.viewModelDom.hide()},300))},s)),i.each(e.__names,function(e){c.runHook("view-model-pre-build",[e,s,d])}),a.applyBindingAccessorsToNode(d[0],{i18nInit:!0,template:function(){return{name:s.viewModelTemplate()}}},s),u.delegateRun(s,"onBuild",[d]),s&&"Popups"===r&&s.registerPopupKeyDown(),i.each(e.__names,function(e){c.runHook("view-model-post-build",[e,s,d])})):u.log("Cannot find view model position: "+r)}return e?e.__vm:null},t.prototype.hideScreenPopup=function(e){e&&e.__vm&&e.__dom&&e.__vm.modalVisibility(!1)},t.prototype.showScreenPopup=function(e,t){e&&(this.buildViewModel(e),e.__vm&&e.__dom&&(e.__vm.modalVisibility(!0),u.delegateRun(e.__vm,"onShow",t||[]),i.each(e.__names,function(n){c.runHook("view-model-on-show",[n,e.__vm,t||[]])})))},t.prototype.isPopupVisible=function(e){return e&&e.__vm?e.__vm.modalVisibility():!1},t.prototype.screenOnRoute=function(e,t){var n=this,o=null,a=null;""===u.pString(e)&&(e=this.sDefaultScreenName),""!==e&&(o=this.screen(e),o||(o=this.screen(this.sDefaultScreenName),o&&(t=e+"/"+t,e=this.sDefaultScreenName)),o&&o.__started&&(o.__builded||(o.__builded=!0,u.isNonEmptyArray(o.viewModels())&&i.each(o.viewModels(),function(e){this.buildViewModel(e,o)},this),u.delegateRun(o,"onBuild")),i.defer(function(){n.oCurrentScreen&&(u.delegateRun(n.oCurrentScreen,"onHide"),u.isNonEmptyArray(n.oCurrentScreen.viewModels())&&i.each(n.oCurrentScreen.viewModels(),function(e){e.__vm&&e.__dom&&"Popups"!==e.__vm.viewModelPosition()&&(e.__dom.hide(),e.__vm.viewModelVisibility(!1),u.delegateRun(e.__vm,"onHide"))})),n.oCurrentScreen=o,n.oCurrentScreen&&(u.delegateRun(n.oCurrentScreen,"onShow"),c.runHook("screen-on-show",[n.oCurrentScreen.screenName(),n.oCurrentScreen]),u.isNonEmptyArray(n.oCurrentScreen.viewModels())&&i.each(n.oCurrentScreen.viewModels(),function(e){e.__vm&&e.__dom&&"Popups"!==e.__vm.viewModelPosition()&&(e.__dom.show(),e.__vm.viewModelVisibility(!0),u.delegateRun(e.__vm,"onShow"),u.delegateRun(e.__vm,"onFocus",[],200),i.each(e.__names,function(t){c.runHook("view-model-on-show",[t,e.__vm])}))},n)),a=o.__cross?o.__cross():null,a&&a.parse(t)})))},t.prototype.startScreens=function(e){o("#rl-content").css({visibility:"hidden"}),i.each(e,function(e){var t=new e,n=t?t.screenName():"";t&&""!==n&&(""===this.sDefaultScreenName&&(this.sDefaultScreenName=n),this.oScreens[n]=t)},this),i.each(this.oScreens,function(e){e&&!e.__started&&e.__start&&(e.__started=!0,e.__start(),c.runHook("screen-pre-start",[e.screenName(),e]),u.delegateRun(e,"onStart"),c.runHook("screen-post-start",[e.screenName(),e]))},this);var t=r.create();t.addRoute(/^([a-zA-Z0-9\-]*)\/?(.*)$/,i.bind(this.screenOnRoute,this)),s.initialized.add(t.parse,t),s.changed.add(t.parse,t),s.init(),o("#rl-content").css({visibility:"visible"}),i.delay(function(){l.$html.removeClass("rl-started-trigger").addClass("rl-started")},50)},t.prototype.setHash=function(e,t,n){e="#"===e.substr(0,1)?e.substr(1):e,e="/"===e.substr(0,1)?e.substr(1):e,n=u.isUnd(n)?!1:!!n,(u.isUnd(t)?1:!t)?(s.changed.active=!0,s[n?"replaceHash":"setHash"](e),s.setHash(e)):(s.changed.active=!1,s[n?"replaceHash":"setHash"](e),s.changed.active=!0)},e.exports=new t}()},6:function(e){!function(){"use strict";var t={};t.StorageResultType={Success:"success",Abort:"abort",Error:"error",Unload:"unload"},t.State={Empty:10,Login:20,Auth:30},t.StateType={Webmail:0,Admin:1},t.Capa={Prem:"PREM",TwoFactor:"TWO_FACTOR",OpenPGP:"OPEN_PGP",Prefetch:"PREFETCH",Gravatar:"GRAVATAR",Themes:"THEMES",Filters:"FILTERS",AdditionalAccounts:"ADDITIONAL_ACCOUNTS",AdditionalIdentities:"ADDITIONAL_IDENTITIES"},t.KeyState={All:"all",None:"none",ContactList:"contact-list",MessageList:"message-list",FolderList:"folder-list",MessageView:"message-view",Compose:"compose",Settings:"settings",Menu:"menu",PopupComposeOpenPGP:"compose-open-pgp",PopupKeyboardShortcutsHelp:"popup-keyboard-shortcuts-help",PopupAsk:"popup-ask"},t.FolderType={Inbox:10,SentItems:11,Draft:12,Trash:13,Spam:14,Archive:15,NotSpam:80,User:99},t.LoginSignMeTypeAsString={DefaultOff:"defaultoff",DefaultOn:"defaulton",Unused:"unused"},t.LoginSignMeType={DefaultOff:0,DefaultOn:1,Unused:2},t.ComposeType={Empty:"empty",Reply:"reply",ReplyAll:"replyall",Forward:"forward",ForwardAsAttachment:"forward-as-attachment",Draft:"draft",EditAsNew:"editasnew"},t.UploadErrorCode={Normal:0,FileIsTooBig:1,FilePartiallyUploaded:2,FileNoUploaded:3,MissingTempFolder:4,FileOnSaveingError:5,FileType:98,Unknown:99},t.SetSystemFoldersNotification={None:0,Sent:1,Draft:2,Spam:3,Trash:4,Archive:5},t.ClientSideKeyName={FoldersLashHash:0,MessagesInboxLastHash:1,MailBoxListSize:2,ExpandedFolders:3,FolderListSize:4},t.EventKeyCode={Backspace:8,Tab:9,Enter:13,Esc:27,PageUp:33,PageDown:34,Left:37,Right:39,Up:38,Down:40,End:35,Home:36,Space:32,Insert:45,Delete:46,A:65,S:83},t.MessageSetAction={SetSeen:0,UnsetSeen:1,SetFlag:2,UnsetFlag:3},t.MessageSelectAction={All:0,None:1,Invert:2,Unseen:3,Seen:4,Flagged:5,Unflagged:6},t.DesktopNotifications={Allowed:0,NotAllowed:1,Denied:2,NotSupported:9},t.MessagePriority={Low:5,Normal:3,High:1},t.EditorDefaultType={Html:"Html",Plain:"Plain"},t.CustomThemeType={Light:"Light",Dark:"Dark"},t.ServerSecure={None:0,SSL:1,TLS:2},t.SearchDateType={All:-1,Days3:3,Days7:7,Month:30},t.SaveSettingsStep={Animate:-2,Idle:-1,TrueResult:1,FalseResult:0},t.InterfaceAnimation={None:"None",Normal:"Normal",Full:"Full"},t.Layout={NoPreview:0,SidePreview:1,BottomPreview:2},t.FilterConditionField={From:"From",To:"To",Recipient:"Recipient",Subject:"Subject"},t.FilterConditionType={Contains:"Contains",NotContains:"NotContains",EqualTo:"EqualTo",NotEqualTo:"NotEqualTo"},t.FiltersAction={None:"None",Move:"Move",Discard:"Discard",Forward:"Forward"},t.FilterRulesType={And:"And",Or:"Or"},t.SignedVerifyStatus={UnknownPublicKeys:-4,UnknownPrivateKey:-3,Unverified:-2,Error:-1,None:0,Success:1},t.ContactPropertyType={Unknown:0,FullName:10,FirstName:15,LastName:16,MiddleName:16,Nick:18,NamePrefix:20,NameSuffix:21,Email:30,Phone:31,Web:32,Birthday:40,Facebook:90,Skype:91,GitHub:92,Note:110,Custom:250},t.Notification={InvalidToken:101,AuthError:102,AccessError:103,ConnectionError:104,CaptchaError:105,SocialFacebookLoginAccessDisable:106,SocialTwitterLoginAccessDisable:107,SocialGoogleLoginAccessDisable:108,DomainNotAllowed:109,AccountNotAllowed:110,AccountTwoFactorAuthRequired:120,AccountTwoFactorAuthError:121,CouldNotSaveNewPassword:130,CurrentPasswordIncorrect:131,NewPasswordShort:132,NewPasswordWeak:133,NewPasswordForbidden:134,ContactsSyncError:140,CantGetMessageList:201,CantGetMessage:202,CantDeleteMessage:203,CantMoveMessage:204,CantCopyMessage:205,CantSaveMessage:301,CantSendMessage:302,InvalidRecipients:303,CantCreateFolder:400,CantRenameFolder:401,CantDeleteFolder:402,CantSubscribeFolder:403,CantUnsubscribeFolder:404,CantDeleteNonEmptyFolder:405,CantSaveSettings:501,CantSavePluginSettings:502,DomainAlreadyExists:601,CantInstallPackage:701,CantDeletePackage:702,InvalidPluginPackage:703,UnsupportedPluginPackage:704,LicensingServerIsUnavailable:710,LicensingExpired:711,LicensingBanned:712,DemoSendMessageError:750,AccountAlreadyExists:801,MailServerError:901,ClientViewError:902,InvalidInputArgument:903,UnknownNotification:999,UnknownError:999},e.exports=t}()},7:function(e,t,n){!function(){"use strict";var t={},i=n(12),o=n(2),a=n(14),s=n(3),r=n(19),l=n(6);t.$win=a(i),t.$doc=a(i.document),t.$html=a("html"),t.$div=a("<div></div>"),t.now=(new i.Date).getTime(),t.momentTrigger=s.observable(!0),t.dropdownVisibility=s.observable(!1).extend({rateLimit:0}),t.tooltipTrigger=s.observable(!1).extend({rateLimit:0}),t.langChangeTrigger=s.observable(!0),t.useKeyboardShortcuts=s.observable(!0),t.iAjaxErrorCount=0,t.iTokenErrorCount=0,t.iMessageBodyCacheCount=0,t.bUnload=!1,t.sUserAgent=(i.navigator.userAgent||"").toLowerCase(),t.bIsiOSDevice=-1<t.sUserAgent.indexOf("iphone")||-1<t.sUserAgent.indexOf("ipod")||-1<t.sUserAgent.indexOf("ipad"),t.bIsAndroidDevice=-1<t.sUserAgent.indexOf("android"),t.bMobileDevice=t.bIsiOSDevice||t.bIsAndroidDevice,t.bDisableNanoScroll=t.bMobileDevice,t.bAllowPdfPreview=!t.bMobileDevice,t.bAnimationSupported=!t.bMobileDevice&&t.$html.hasClass("csstransitions"),t.bXMLHttpRequestSupported=!!i.XMLHttpRequest,t.sAnimationType="",t.__APP=null,t.oHtmlEditorDefaultConfig={title:!1,stylesSet:!1,customConfig:"",contentsCss:"",toolbarGroups:[{name:"spec"},{name:"styles"},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"colors"},{name:"paragraph",groups:["list","indent","blocks","align"]},{name:"links"},{name:"insert"},{name:"others"}],removePlugins:"contextmenu",removeButtons:"Format,Undo,Redo,Cut,Copy,Paste,Anchor,Strike,Subscript,Superscript,Image,SelectAll",removeDialogTabs:"link:advanced;link:target;image:advanced;images:advanced",extraPlugins:"plain",allowedContent:!0,autoParagraph:!1,font_defaultLabel:"Arial",fontSize_defaultLabel:"13",fontSize_sizes:"10/10px;12/12px;13/13px;14/14px;16/16px;18/18px;20/20px;24/24px;28/28px;36/36px;48/48px"},t.oHtmlEditorLangsMap={de:"de",es:"es",fr:"fr",hu:"hu",is:"is",it:"it",ja:"ja","ja-jp":"ja",ko:"ko","ko-kr":"ko",lv:"lv",nl:"nl",no:"no",pl:"pl",pt:"pt","pt-pt":"pt","pt-br":"pt-br",ro:"ro",ru:"ru",sk:"sk",tr:"tr",ua:"ru",zh:"zh","zh-cn":"zh-cn"},t.bAllowPdfPreview&&i.navigator&&i.navigator.mimeTypes&&(t.bAllowPdfPreview=!!o.find(i.navigator.mimeTypes,function(e){return e&&"application/pdf"===e.type})),t.oI18N=i.rainloopI18N||{},t.oNotificationI18N={},t.aBootstrapDropdowns=[],t.aViewModels={settings:[],"settings-removed":[],"settings-disabled":[]},t.leftPanelDisabled=s.observable(!1),t.popupVisibilityNames=s.observableArray([]),t.popupVisibility=s.computed(function(){return 0<t.popupVisibilityNames().length},this),t.keyScopeReal=s.observable(l.KeyState.All),t.keyScopeFake=s.observable(l.KeyState.All),t.keyScope=s.computed({owner:this,read:function(){return t.keyScopeFake()},write:function(e){l.KeyState.Menu!==e&&(r.filter=l.KeyState.Compose===e?function(){return t.useKeyboardShortcuts()}:function(e){if(t.useKeyboardShortcuts()){var n=e.target||e.srcElement,i=n?n.tagName:"";return i=i.toUpperCase(),!("INPUT"===i||"SELECT"===i||"TEXTAREA"===i||n&&"DIV"===i&&"editorHtmlArea"===n.className&&n.contentEditable)}return!1},t.keyScopeFake(e),t.dropdownVisibility()&&(e=l.KeyState.Menu)),t.keyScopeReal(e)}}),t.keyScopeReal.subscribe(function(e){r.setScope(e)}),t.dropdownVisibility.subscribe(function(e){e?(t.tooltipTrigger(!t.tooltipTrigger()),t.keyScope(l.KeyState.Menu)):l.KeyState.Menu===r.getScope()&&t.keyScope(t.keyScopeFake())}),e.exports=t}()},9:function(e,t,n){!function(){"use strict";function t(e,t){this.bDisabeCloseOnEsc=!1,this.sPosition=a.pString(e),this.sTemplate=a.pString(t),this.sDefaultKeyScope=o.KeyState.None,this.sCurrentKeyScope=this.sDefaultKeyScope,this.viewModelVisibility=i.observable(!1),this.modalVisibility=i.observable(!1).extend({rateLimit:0}),this.viewModelName="",this.viewModelNames=[],this.viewModelDom=null}var i=n(3),o=n(6),a=n(1),s=n(7);t.prototype.bDisabeCloseOnEsc=!1,t.prototype.sPosition="",t.prototype.sTemplate="",t.prototype.sDefaultKeyScope=o.KeyState.None,t.prototype.sCurrentKeyScope=o.KeyState.None,t.prototype.viewModelName="",t.prototype.viewModelNames=[],t.prototype.viewModelDom=null,t.prototype.viewModelTemplate=function(){return this.sTemplate},t.prototype.viewModelPosition=function(){return this.sPosition},t.prototype.cancelCommand=function(){},t.prototype.closeCommand=function(){},t.prototype.storeAndSetKeyScope=function(){this.sCurrentKeyScope=s.keyScope(),s.keyScope(this.sDefaultKeyScope)},t.prototype.restoreKeyScope=function(){s.keyScope(this.sCurrentKeyScope)},t.prototype.registerPopupKeyDown=function(){var e=this;s.$win.on("keydown",function(t){if(t&&e.modalVisibility&&e.modalVisibility()){if(!this.bDisabeCloseOnEsc&&o.EventKeyCode.Esc===t.keyCode)return a.delegateRun(e,"cancelCommand"),!1;if(o.EventKeyCode.Backspace===t.keyCode&&!a.inFocus())return!1}return!0})},e.exports=t}()},10:function(e,t,n){!function(){"use strict";function t(){this.oSettings=i.rainloopAppData||{},this.oSettings=o.isNormal(this.oSettings)?this.oSettings:{}}var i=n(12),o=n(1);t.prototype.oSettings=null,t.prototype.settingsGet=function(e){return o.isUnd(this.oSettings[e])?null:this.oSettings[e]},t.prototype.settingsSet=function(e,t){this.oSettings[e]=t},t.prototype.capa=function(e){var t=this.settingsGet("Capa");return o.isArray(t)&&o.isNormal(e)&&-1<o.inArray(e,t)},e.exports=new t}()},11:function(e,t,n){!function(){"use strict";function t(){var e=n(10);this.sBase="#/",this.sServer="./?",this.sVersion=e.settingsGet("Version"),this.sSpecSuffix=e.settingsGet("AuthAccountHash")||"0",this.sStaticPrefix=e.settingsGet("StaticPrefix")||"rainloop/v/"+this.sVersion+"/static/"}var i=n(1);t.prototype.root=function(){return this.sBase},t.prototype.attachmentDownload=function(e){return this.sServer+"/Raw/"+this.sSpecSuffix+"/Download/"+e},t.prototype.attachmentPreview=function(e){return this.sServer+"/Raw/"+this.sSpecSuffix+"/View/"+e},t.prototype.attachmentPreviewAsPlain=function(e){return this.sServer+"/Raw/"+this.sSpecSuffix+"/ViewAsPlain/"+e},t.prototype.upload=function(){return this.sServer+"/Upload/"+this.sSpecSuffix+"/"},t.prototype.uploadContacts=function(){return this.sServer+"/UploadContacts/"+this.sSpecSuffix+"/"},t.prototype.uploadBackground=function(){return this.sServer+"/UploadBackground/"+this.sSpecSuffix+"/"},t.prototype.append=function(){return this.sServer+"/Append/"+this.sSpecSuffix+"/"},t.prototype.change=function(e){return this.sServer+"/Change/"+this.sSpecSuffix+"/"+i.encodeURIComponent(e)+"/"},t.prototype.ajax=function(e){return this.sServer+"/Ajax/"+this.sSpecSuffix+"/"+e},t.prototype.messageViewLink=function(e){return this.sServer+"/Raw/"+this.sSpecSuffix+"/ViewAsPlain/"+e},t.prototype.messageDownloadLink=function(e){return this.sServer+"/Raw/"+this.sSpecSuffix+"/Download/"+e},t.prototype.avatarLink=function(e){return this.sServer+"/Raw/0/Avatar/"+i.encodeURIComponent(e)+"/"},t.prototype.inbox=function(){return this.sBase+"mailbox/Inbox"},t.prototype.messagePreview=function(){return this.sBase+"mailbox/message-preview"},t.prototype.settings=function(e){var t=this.sBase+"settings";return i.isUnd(e)||""===e||(t+="/"+e),t},t.prototype.about=function(){return this.sBase+"about"},t.prototype.admin=function(e){var t=this.sBase;switch(e){case"AdminDomains":t+="domains";break;case"AdminSecurity":t+="security";break;case"AdminLicensing":t+="licensing"}return t},t.prototype.mailBox=function(e,t,n){t=i.isNormal(t)?i.pInt(t):1,n=i.pString(n);var o=this.sBase+"mailbox/";return""!==e&&(o+=encodeURI(e)),t>1&&(o=o.replace(/[\/]+$/,""),o+="/p"+t),""!==n&&(o=o.replace(/[\/]+$/,""),o+="/"+encodeURI(n)),o},t.prototype.phpInfo=function(){return this.sServer+"Info"},t.prototype.langLink=function(e){return this.sServer+"/Lang/0/"+encodeURI(e)+"/"+this.sVersion+"/"},t.prototype.exportContactsVcf=function(){return this.sServer+"/Raw/"+this.sSpecSuffix+"/ContactsVcf/"},t.prototype.exportContactsCsv=function(){return this.sServer+"/Raw/"+this.sSpecSuffix+"/ContactsCsv/"},t.prototype.emptyContactPic=function(){return this.sStaticPrefix+"css/images/empty-contact.png"},t.prototype.sound=function(e){return this.sStaticPrefix+"sounds/"+e},t.prototype.themePreviewLink=function(e){var t="rainloop/v/"+this.sVersion+"/";return"@custom"===e.substr(-7)&&(e=i.trim(e.substring(0,e.length-7)),t=""),t+"themes/"+encodeURI(e)+"/images/preview.png"},t.prototype.notificationMailIcon=function(){return this.sStaticPrefix+"css/images/icom-message-notification.png"},t.prototype.openPgpJs=function(){return this.sStaticPrefix+"js/min/openpgp.js"},t.prototype.socialGoogle=function(){return this.sServer+"SocialGoogle"+(""!==this.sSpecSuffix?"/"+this.sSpecSuffix+"/":"")},t.prototype.socialTwitter=function(){return this.sServer+"SocialTwitter"+(""!==this.sSpecSuffix?"/"+this.sSpecSuffix+"/":"")},t.prototype.socialFacebook=function(){return this.sServer+"SocialFacebook"+(""!==this.sSpecSuffix?"/"+this.sSpecSuffix+"/":"")},e.exports=new t}()},12:function(e){e.exports=window},14:function(e){e.exports=jQuery},17:function(e){!function(){"use strict";var t={};t.Values={},t.DataImages={},t.Defaults={},t.Defaults.MessagesPerPage=20,t.Defaults.ContactsPerPage=50,t.Defaults.MessagesPerPageArray=[10,20,30,50,100],t.Defaults.DefaultAjaxTimeout=3e4,t.Defaults.SearchAjaxTimeout=3e5,t.Defaults.SendMessageAjaxTimeout=3e5,t.Defaults.SaveMessageAjaxTimeout=2e5,t.Defaults.ContactsSyncAjaxTimeout=2e5,t.Values.UnuseOptionValue="__UNUSE__",t.Values.ClientSideStorageIndexName="rlcsc",t.Values.ImapDefaulPort=143,t.Values.ImapDefaulSecurePort=993,t.Values.SmtpDefaulPort=25,t.Values.SmtpDefaulSecurePort=465,t.Values.MessageBodyCacheLimit=15,t.Values.AjaxErrorLimit=7,t.Values.TokenErrorLimit=10,t.DataImages.UserDotPic="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2P8DwQACgAD/il4QJ8AAAAASUVORK5CYII=",t.DataImages.TranspPic="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",e.exports=t}(e)},19:function(e){e.exports=key},22:function(e,t,n){!function(){"use strict";function t(){this.oSubs={}}var i=n(2),o=n(1),a=n(26);t.prototype.oSubs={},t.prototype.sub=function(e,t,n){return o.isUnd(this.oSubs[e])&&(this.oSubs[e]=[]),this.oSubs[e].push([t,n]),this},t.prototype.pub=function(e,t){return a.runHook("rl-pub",[e,t]),o.isUnd(this.oSubs[e])||i.each(this.oSubs[e],function(e){e[0]&&e[0].apply(e[1]||null,t||[])}),this},e.exports=new t}()},23:function(e,t,n){!function(){"use strict";function t(e,t){this.email=e||"",this.name=t||"",this.clearDuplicateName()}var i=n(1);t.newInstanceFromJson=function(e){var n=new t;return n.initByJson(e)?n:null},t.prototype.name="",t.prototype.email="",t.prototype.clear=function(){this.email="",this.name=""},t.prototype.validate=function(){return""!==this.name||""!==this.email},t.prototype.hash=function(e){return"#"+(e?"":this.name)+"#"+this.email+"#"},t.prototype.clearDuplicateName=function(){this.name===this.email&&(this.name="")},t.prototype.search=function(e){return-1<(this.name+" "+this.email).toLowerCase().indexOf(e.toLowerCase())},t.prototype.parse=function(e){this.clear(),e=i.trim(e);var t=/(?:"([^"]+)")? ?<?(.*?@[^>,]+)>?,? ?/g,n=t.exec(e);n?(this.name=n[1]||"",this.email=n[2]||"",this.clearDuplicateName()):/^[^@]+@[^@]+$/.test(e)&&(this.name="",this.email=e)},t.prototype.initByJson=function(e){var t=!1;return e&&"Object/Email"===e["@Object"]&&(this.name=i.trim(e.Name),this.email=i.trim(e.Email),t=""!==this.email,this.clearDuplicateName()),t},t.prototype.toLine=function(e,t,n){var o="";return""!==this.email&&(t=i.isUnd(t)?!1:!!t,n=i.isUnd(n)?!1:!!n,e&&""!==this.name?o=t?'<a href="mailto:'+i.encodeHtml('"'+this.name+'" <'+this.email+">")+'" target="_blank" tabindex="-1">'+i.encodeHtml(this.name)+"</a>":n?i.encodeHtml(this.name):this.name:(o=this.email,""!==this.name?t?o=i.encodeHtml('"'+this.name+'" <')+'<a href="mailto:'+i.encodeHtml('"'+this.name+'" <'+this.email+">")+'" target="_blank" tabindex="-1">'+i.encodeHtml(o)+"</a>"+i.encodeHtml(">"):(o='"'+this.name+'" <'+o+">",n&&(o=i.encodeHtml(o))):t&&(o='<a href="mailto:'+i.encodeHtml(this.email)+'" target="_blank" tabindex="-1">'+i.encodeHtml(this.email)+"</a>"))),o},t.prototype.mailsoParse=function(e){if(e=i.trim(e),""===e)return!1;for(var t=function(e,t,n){e+="";var i=e.length;return 0>t&&(t+=i),i="undefined"==typeof n?i:0>n?n+i:n+t,t>=e.length||0>t||t>i?!1:e.slice(t,i)},n=function(e,t,n,i){return 0>n&&(n+=e.length),i=void 0!==i?i:e.length,0>i&&(i=i+e.length-n),e.slice(0,n)+t.substr(0,i)+t.slice(i)+e.slice(n+i)},o="",a="",s="",r=!1,l=!1,c=!1,u=null,p=0,d=0,m=0;m<e.length;){switch(e.substr(m,1)){case'"':r||l||c?l||c||(d=m,o=t(e,p+1,d-p-1),e=n(e,"",p,d-p+1),d=0,m=0,p=0,r=!1):(r=!0,p=m);break;case"<":r||l||c||(m>0&&0===o.length&&(o=t(e,0,m)),l=!0,p=m);break;case">":l&&(d=m,a=t(e,p+1,d-p-1),e=n(e,"",p,d-p+1),d=0,m=0,p=0,l=!1);break;case"(":r||l||c||(c=!0,p=m);break;case")":c&&(d=m,s=t(e,p+1,d-p-1),e=n(e,"",p,d-p+1),d=0,m=0,p=0,c=!1);break;case"\\":m++}m++}return 0===a.length&&(u=e.match(/[^@\s]+@\S+/i),u&&u[0]?a=u[0]:o=e),a.length>0&&0===o.length&&0===s.length&&(o=e.replace(a,"")),a=i.trim(a).replace(/^[<]+/,"").replace(/[>]+$/,""),o=i.trim(o).replace(/^["']+/,"").replace(/["']+$/,""),s=i.trim(s).replace(/^[(]+/,"").replace(/[)]+$/,""),o=o.replace(/\\\\(.)/g,"$1"),s=s.replace(/\\\\(.)/g,"$1"),this.name=o,this.email=a,this.clearDuplicateName(),!0},t.prototype.inputoTagLine=function(){return 0<this.name.length?this.name+" ("+this.email+")":this.email},e.exports=t}()},24:function(e,t,n){!function(){"use strict";function t(e,t){this.sScreenName=e,this.aViewModels=a.isArray(t)?t:[]}var i=n(2),o=n(48),a=n(1);t.prototype.oCross=null,t.prototype.sScreenName="",t.prototype.aViewModels=[],t.prototype.viewModels=function(){return this.aViewModels},t.prototype.screenName=function(){return this.sScreenName},t.prototype.routes=function(){return null},t.prototype.__cross=function(){return this.oCross},t.prototype.__start=function(){var e=this.routes(),t=null,n=null;a.isNonEmptyArray(e)&&(n=i.bind(this.onRoute||a.emptyFunction,this),t=o.create(),i.each(e,function(e){t.addRoute(e[0],n).rules=e[1]}),this.oCross=t)},e.exports=t}()},25:function(e){e.exports=moment},26:function(e,t,n){!function(){"use strict";function t(){this.__boot=null,this.__data=null,this.__remote=null,this.oSettings=n(10),this.oViewModelsHooks={},this.oSimpleHooks={}}var i=n(2),o=n(1);t.prototype.__boot=null,t.prototype.__data=null,t.prototype.__remote=null,t.prototype.oViewModelsHooks={},t.prototype.oSimpleHooks={},t.prototype.addHook=function(e,t){o.isFunc(t)&&(o.isArray(this.oSimpleHooks[e])||(this.oSimpleHooks[e]=[]),this.oSimpleHooks[e].push(t))},t.prototype.runHook=function(e,t){o.isArray(this.oSimpleHooks[e])&&(t=t||[],i.each(this.oSimpleHooks[e],function(e){e.apply(null,t)}))},t.prototype.mainSettingsGet=function(e){return this.oSettings.settingsGet(e)},t.prototype.remoteRequest=function(e,t,n,i,o,a){this.__remote&&this.__remote.defaultRequest(e,t,n,i,o,a)},t.prototype.settingsGet=function(e,t){var n=this.oSettings.settingsGet("Plugins");return n=n&&!o.isUnd(n[e])?n[e]:null,n?o.isUnd(n[t])?null:n[t]:null},e.exports=new t}()},31:function(e,t,n){!function(){"use strict";function t(){c.call(this,"Popups","PopupsAsk"),this.askDesc=o.observable(""),this.yesButton=o.observable(""),this.noButton=o.observable(""),this.yesFocus=o.observable(!1),this.noFocus=o.observable(!1),this.fYesAction=null,this.fNoAction=null,this.bDisabeCloseOnEsc=!0,this.sDefaultKeyScope=s.KeyState.PopupAsk,l.constructorEnd(this)}var i=n(2),o=n(3),a=n(19),s=n(6),r=n(1),l=n(5),c=n(9);l.extendAsViewModel(["View:Popup:Ask","PopupsAskViewModel"],t),i.extend(t.prototype,c.prototype),t.prototype.clearPopup=function(){this.askDesc(""),this.yesButton(r.i18n("POPUPS_ASK/BUTTON_YES")),this.noButton(r.i18n("POPUPS_ASK/BUTTON_NO")),this.yesFocus(!1),this.noFocus(!1),this.fYesAction=null,this.fNoAction=null},t.prototype.yesClick=function(){this.cancelCommand(),r.isFunc(this.fYesAction)&&this.fYesAction.call(null)},t.prototype.noClick=function(){this.cancelCommand(),r.isFunc(this.fNoAction)&&this.fNoAction.call(null)},t.prototype.onShow=function(e,t,n,i,o){this.clearPopup(),this.fYesAction=t||null,this.fNoAction=n||null,this.askDesc(e||""),i&&this.yesButton(i),i&&this.yesButton(o)},t.prototype.onFocus=function(){this.yesFocus(!0)},t.prototype.onBuild=function(){a("tab, shift+tab, right, left",s.KeyState.PopupAsk,i.bind(function(){return this.yesFocus()?this.noFocus(!0):this.yesFocus(!0),!1},this)),a("esc",s.KeyState.PopupAsk,i.bind(function(){return this.noClick(),!1},this))},e.exports=t}()},32:function(e,t,n){!function(){"use strict";function t(){l.call(this,"Popups","PopupsLanguages"),this.Data=s.__APP.data(),this.exp=o.observable(!1),this.languages=o.computed(function(){return i.map(this.Data.languages(),function(e){return{key:e,selected:o.observable(!1),fullName:a.convertLangName(e)}})},this),this.Data.mainLanguage.subscribe(function(){this.resetMainLanguage()},this),r.constructorEnd(this)}var i=n(2),o=n(3),a=n(1),s=n(7),r=n(5),l=n(9);r.extendAsViewModel(["View:Popup:Languages","PopupsLanguagesViewModel"],t),i.extend(t.prototype,l.prototype),t.prototype.languageEnName=function(e){return a.convertLangName(e,!0)},t.prototype.resetMainLanguage=function(){var e=this.Data.mainLanguage();i.each(this.languages(),function(t){t.selected(t.key===e)})},t.prototype.onShow=function(){this.exp(!0),this.resetMainLanguage()},t.prototype.onHide=function(){this.exp(!1)},t.prototype.changeLanguage=function(e){this.Data.mainLanguage(e),this.cancelCommand()},e.exports=t}()},34:function(e,t,n){!function(){"use strict";function t(e){p.call(this),this.isLocalAutocomplete=!0,this.iframe=a('<iframe style="display:none" src="javascript:;" />').appendTo("body"),s.$win.on("error",function(t){t&&t.originalEvent&&t.originalEvent.message&&-1===r.inArray(t.originalEvent.message,["Script error.","Uncaught Error: Error calling method on NPObject."])&&e.jsError(r.emptyFunction,t.originalEvent.message,t.originalEvent.filename,t.originalEvent.lineno,i.location&&i.location.toString?i.location.toString():"",s.$html.attr("class"),r.microtime()-s.now)}),s.$doc.on("keydown",function(e){e&&e.ctrlKey&&s.$html.addClass("rl-ctrl-key-pressed")}).on("keyup",function(e){e&&!e.ctrlKey&&s.$html.removeClass("rl-ctrl-key-pressed")})}var i=n(12),o=n(2),a=n(14),s=n(7),r=n(1),l=n(11),c=n(22),u=n(10),p=n(50);o.extend(t.prototype,p.prototype),t.prototype.remote=function(){return null},t.prototype.data=function(){return null},t.prototype.download=function(e){var t=null,n=null,o=i.navigator.userAgent.toLowerCase();return o&&(o.indexOf("chrome")>-1||o.indexOf("chrome")>-1)&&(n=i.document.createElement("a"),n.href=e,i.document.createEvent&&(t=i.document.createEvent("MouseEvents"),t&&t.initEvent&&n.dispatchEvent))?(t.initEvent("click",!0,!0),n.dispatchEvent(t),!0):(s.bMobileDevice?(i.open(e,"_self"),i.focus()):this.iframe.attr("src",e),!0)},t.prototype.setTitle=function(e){e=(r.isNormal(e)&&0<e.length?e+" - ":"")+u.settingsGet("Title")||"",i.document.title="_",i.document.title=e},t.prototype.loginAndLogoutReload=function(e,t){var a=n(5),s=r.pString(u.settingsGet("CustomLogoutLink")),c=!!u.settingsGet("InIframe");e=r.isUnd(e)?!1:!!e,t=r.isUnd(t)?!1:!!t,e&&t&&i.close&&i.close(),e&&""!==s&&i.location.href!==s?o.delay(function(){c&&i.parent?i.parent.location.href=s:i.location.href=s
},100):(a.routeOff(),a.setHash(l.root(),!0),a.routeOff(),o.delay(function(){c&&i.parent?i.parent.location.reload():i.location.reload()},100))},t.prototype.historyBack=function(){i.history.back()},t.prototype.bootstart=function(){c.pub("rl.bootstart");var e=n(117);r.initOnStartOrLangChange(function(){r.initNotificationLanguage()},null),o.delay(function(){r.windowResize()},1e3),e.addState({id:"mobile",maxWidth:767,onEnter:function(){s.$html.addClass("ssm-state-mobile"),c.pub("ssm.mobile-enter")},onLeave:function(){s.$html.removeClass("ssm-state-mobile"),c.pub("ssm.mobile-leave")}}),e.addState({id:"tablet",minWidth:768,maxWidth:999,onEnter:function(){s.$html.addClass("ssm-state-tablet")},onLeave:function(){s.$html.removeClass("ssm-state-tablet")}}),e.addState({id:"desktop",minWidth:1e3,maxWidth:1400,onEnter:function(){s.$html.addClass("ssm-state-desktop")},onLeave:function(){s.$html.removeClass("ssm-state-desktop")}}),e.addState({id:"desktop-large",minWidth:1400,onEnter:function(){s.$html.addClass("ssm-state-desktop-large")},onLeave:function(){s.$html.removeClass("ssm-state-desktop-large")}}),c.sub("ssm.mobile-enter",function(){s.leftPanelDisabled(!0)}),c.sub("ssm.mobile-leave",function(){s.leftPanelDisabled(!1)}),s.leftPanelDisabled.subscribe(function(e){s.$html.toggleClass("rl-left-panel-disabled",e)}),e.ready()},e.exports=t}()},35:function(e,t,n){!function(){"use strict";e.exports=function(e){var t=n(12),i=n(2),o=n(14),a=n(7),s=n(26),r=n(1),l=n(6),c=n(23);a.__APP=e,s.__boot=e,s.__remote=e.remote(),s.__data=e.data(),a.$html.addClass(a.bMobileDevice?"mobile":"no-mobile"),a.$win.keydown(r.killCtrlAandS).keyup(r.killCtrlAandS),a.$win.unload(function(){a.bUnload=!0}),a.$html.on("click.dropdown.data-api",function(){r.detectDropdownVisibility()}),t.rl=t.rl||{},t.rl.addHook=i.bind(s.addHook,s),t.rl.settingsGet=i.bind(s.mainSettingsGet,s),t.rl.remoteRequest=i.bind(s.remoteRequest,s),t.rl.pluginSettingsGet=i.bind(s.settingsGet,s),t.rl.createCommand=r.createCommand,t.rl.EmailModel=c,t.rl.Enums=l,t.__APP_BOOT=function(n){o(function(){t.rainloopTEMPLATES&&t.rainloopTEMPLATES[0]?(o("#rl-templates").html(t.rainloopTEMPLATES[0]),i.delay(function(){e.bootstart(),a.$html.removeClass("no-js rl-booted-trigger").addClass("rl-booted")},10)):n(!1),t.__APP_BOOT=null})}}}()},37:function(e,t,n){!function(){"use strict";function t(){this.idContactTag=0,this.name=i.observable(""),this.readOnly=!1}var i=n(3),o=n(1);t.prototype.parse=function(e){var t=!1;return e&&"Object/Tag"===e["@Object"]&&(this.idContact=o.pInt(e.IdContactTag),this.name(o.pString(e.Name)),this.readOnly=!!e.ReadOnly,t=!0),t},t.prototype.filterHelper=function(e){return-1!==this.name().toLowerCase().indexOf(e.toLowerCase())},t.prototype.toLine=function(e){return(o.isUnd(e)?1:!e)?this.name():o.encodeHtml(this.name())},e.exports=t}()},39:function(e,t,n){!function(){"use strict";function t(){o.initDataConstructorBySettings(this)}var i=n(6),o=n(1),a=n(10);t.prototype.populateDataOnStart=function(){var e=o.pInt(a.settingsGet("Layout")),t=a.settingsGet("Languages"),n=a.settingsGet("Themes");o.isArray(t)&&this.languages(t),o.isArray(n)&&this.themes(n),this.mainLanguage(a.settingsGet("Language")),this.mainTheme(a.settingsGet("Theme")),this.capaAdditionalAccounts(a.capa(i.Capa.AdditionalAccounts)),this.capaAdditionalIdentities(a.capa(i.Capa.AdditionalIdentities)),this.capaGravatar(a.capa(i.Capa.Gravatar)),this.determineUserLanguage(!!a.settingsGet("DetermineUserLanguage")),this.determineUserDomain(!!a.settingsGet("DetermineUserDomain")),this.capaThemes(a.capa(i.Capa.Themes)),this.allowLanguagesOnLogin(!!a.settingsGet("AllowLanguagesOnLogin")),this.allowLanguagesOnSettings(!!a.settingsGet("AllowLanguagesOnSettings")),this.useLocalProxyForExternalImages(!!a.settingsGet("UseLocalProxyForExternalImages")),this.editorDefaultType(a.settingsGet("EditorDefaultType")),this.showImages(!!a.settingsGet("ShowImages")),this.contactsAutosave(!!a.settingsGet("ContactsAutosave")),this.interfaceAnimation(a.settingsGet("InterfaceAnimation")),this.mainMessagesPerPage(a.settingsGet("MPP")),this.desktopNotifications(!!a.settingsGet("DesktopNotifications")),this.useThreads(!!a.settingsGet("UseThreads")),this.replySameFolder(!!a.settingsGet("ReplySameFolder")),this.useCheckboxesInList(!!a.settingsGet("UseCheckboxesInList")),this.layout(i.Layout.SidePreview),-1<o.inArray(e,[i.Layout.NoPreview,i.Layout.SidePreview,i.Layout.BottomPreview])&&this.layout(e),this.facebookSupported(!!a.settingsGet("SupportedFacebookSocial")),this.facebookEnable(!!a.settingsGet("AllowFacebookSocial")),this.facebookAppID(a.settingsGet("FacebookAppID")),this.facebookAppSecret(a.settingsGet("FacebookAppSecret")),this.twitterEnable(!!a.settingsGet("AllowTwitterSocial")),this.twitterConsumerKey(a.settingsGet("TwitterConsumerKey")),this.twitterConsumerSecret(a.settingsGet("TwitterConsumerSecret")),this.googleEnable(!!a.settingsGet("AllowGoogleSocial")),this.googleClientID(a.settingsGet("GoogleClientID")),this.googleClientSecret(a.settingsGet("GoogleClientSecret")),this.googleApiKey(a.settingsGet("GoogleApiKey")),this.dropboxEnable(!!a.settingsGet("AllowDropboxSocial")),this.dropboxApiKey(a.settingsGet("DropboxApiKey")),this.contactsIsAllowed(!!a.settingsGet("ContactsIsAllowed"))},e.exports=t}()},40:function(e,t,n){!function(){"use strict";function t(){this.oRequests={}}var i=n(12),o=n(2),a=n(14),s=n(17),r=n(6),l=n(7),c=n(1),u=n(26),p=n(11),d=n(10);t.prototype.oRequests={},t.prototype.defaultResponse=function(e,t,n,a,p,d){var m=function(){r.StorageResultType.Success!==n&&l.bUnload&&(n=r.StorageResultType.Unload),r.StorageResultType.Success===n&&a&&!a.Result?(a&&-1<c.inArray(a.ErrorCode,[r.Notification.AuthError,r.Notification.AccessError,r.Notification.ConnectionError,r.Notification.DomainNotAllowed,r.Notification.AccountNotAllowed,r.Notification.MailServerError,r.Notification.UnknownNotification,r.Notification.UnknownError])&&l.iAjaxErrorCount++,a&&r.Notification.InvalidToken===a.ErrorCode&&l.iTokenErrorCount++,s.Values.TokenErrorLimit<l.iTokenErrorCount&&l.__APP&&l.__APP.loginAndLogoutReload(!0),(a.Logout||s.Values.AjaxErrorLimit<l.iAjaxErrorCount)&&(i.__rlah_clear&&i.__rlah_clear(),l.__APP&&l.__APP.loginAndLogoutReload(!0))):r.StorageResultType.Success===n&&a&&a.Result&&(l.iAjaxErrorCount=0,l.iTokenErrorCount=0),e&&(u.runHook("ajax-default-response",[t,r.StorageResultType.Success===n?a:null,n,p,d]),e(n,r.StorageResultType.Success===n?a:null,p,t,d))};switch(n){case"success":n=r.StorageResultType.Success;break;case"abort":n=r.StorageResultType.Abort;break;default:n=r.StorageResultType.Error}r.StorageResultType.Error===n?o.delay(m,300):m()},t.prototype.ajaxRequest=function(e,t,n,s,r){var l=this,u=""===s,m={},f=(new i.Date).getTime(),g=null,h="";return t=t||{},n=c.isNormal(n)?n:2e4,s=c.isUnd(s)?"":c.pString(s),r=c.isArray(r)?r:[],h=t.Action||"",h&&0<r.length&&o.each(r,function(e){l.oRequests[e]&&(l.oRequests[e].__aborted=!0,l.oRequests[e].abort&&l.oRequests[e].abort(),l.oRequests[e]=null)}),u&&(t.XToken=d.settingsGet("Token")),g=a.ajax({type:u?"POST":"GET",url:p.ajax(s),async:!0,dataType:"json",data:u?t:{},headers:m,timeout:n,global:!0}),g.always(function(n,o){var a=!1;n&&n.Time&&(a=c.pInt(n.Time)>(new i.Date).getTime()-f),h&&l.oRequests[h]&&(l.oRequests[h].__aborted&&(o="abort"),l.oRequests[h]=null),l.defaultResponse(e,h,o,n,a,t)}),h&&0<r.length&&-1<c.inArray(h,r)&&(this.oRequests[h]&&(this.oRequests[h].__aborted=!0,this.oRequests[h].abort&&this.oRequests[h].abort(),this.oRequests[h]=null),this.oRequests[h]=g),g},t.prototype.defaultRequest=function(e,t,n,i,o,a){n=n||{},n.Action=t,o=c.pString(o),u.runHook("ajax-default-request",[t,n,o]),this.ajaxRequest(e,n,c.isUnd(i)?s.Defaults.DefaultAjaxTimeout:c.pInt(i),o,a)},t.prototype.noop=function(e){this.defaultRequest(e,"Noop")},t.prototype.jsError=function(e,t,n,i,o,a,s){this.defaultRequest(e,"JsError",{Message:t,FileName:n,LineNo:i,Location:o,HtmlCapa:a,TimeOnPage:s})},t.prototype.jsInfo=function(e,t,n,i){this.defaultRequest(e,"JsInfo",{Type:t,Data:n,IsError:(c.isUnd(i)?1:!i)?"0":"1"})},t.prototype.getPublicKey=function(e){this.defaultRequest(e,"GetPublicKey")},t.prototype.jsVersion=function(e,t){this.defaultRequest(e,"Version",{Version:t})},e.exports=t}()},48:function(e){e.exports=crossroads},50:function(e){!function(){"use strict";function t(){}t.prototype.bootstart=function(){},e.exports=t}()},115:function(e){e.exports=hasher},117:function(e){e.exports=ssm}});